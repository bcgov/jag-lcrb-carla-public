<div class="dashboard-spacing" style="position: relative">
  <div [ngBusy]="busy"></div>

  <div *ngIf="account?.businessType">
    <div [formGroup]="form" style="padding-left: 45px; position: relative">
      <!-- Title -->
      <h1 class="ngtest-page-title">Cancel Third Party Operator Relationship</h1>
    </div>

    <div [formGroup]="form" class="application-wrapper">
      <!-- Preamble -->


      <h3 class="blue-header">LICENCE DETAILS</h3>
      <section class="padded-section">
        <app-field label="Establishment Name" [required]="false" [valid]="true">
          <input class="form-control" style="width: 500px;" type="text" [readonly]="true"
                 formControlName="establishmentName">
        </app-field>

        <div>
          <address class="row">
            <app-field class="col-md-12 col-xs-12" label="Address" [isFullWidth]="true">
              <input class="form-control" type="text" readonly formControlName="establishmentAddressStreet">
            </app-field>
            <app-field class="col-md-4 col-xs-12" label="City" [isFullWidth]="true">
              <input class="form-control" type="text" readonly formControlName="establishmentAddressCity">
            </app-field>
            <section class="col-md-4 col-xs-12">
              <app-field label="Province" [isFullWidth]="true">
                <input class="form-control" readonly type="text" value="British Columbia">
              </app-field>
            </section>
            <section class="col-md-4 col-xs-12">
              <app-field label="Postal Code">
                <input class="form-control" type="text" readonly formControlName="establishmentAddressPostalCode">
              </app-field>
            </section>
            <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
              <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
            </app-field>
          </address>
          <div class="light-blue-bg" style="display: flex;">
            <div style="flex: 0 0 210px;">
              <app-field label="Parcel Identifier (PID)">
                <input type="text" readonly class="form-control" (keydown)="rejectIfNotDigitOrBackSpace($event)"
                       style="width: 200px;" formControlName="establishmentParcelId">
              </app-field>
            </div>
          </div>
        </div>
      </section>


      <h3 class="blue-header">CONFIRM TERMINATION OF THIRD PARTY OPERATOR RELATIONSHIP</h3>
      <section class="padded-section">
        <app-field [required]="true" [valid]="isValidOrNotTouched('transferConsent')"
                   errorMessage="Please consent to terminate third party operator relationship" [showChevrons]="false">
          <mat-checkbox formControlName="transferConsent">
            <!-- <span class="error-states">*</span> -->
            <span class="ml-2">
              I agree to terminate the third party operator relationship for my {{licence.licenseType}} licence.
            </span>
          </mat-checkbox>
        </app-field>
      </section>

      <section class="error mt-3" *ngIf="showValidationMessages">
        <p *ngFor="let message of validationMessages">
          <span class="app-cancel">
            <mat-icon aria-label="error icon" style="font-size: 15px;">error</mat-icon>
            {{message}}
          </span>
        </p>
      </section>

      <section class="position-relative mt-3">
        <button class="btn btn-primary" (click)="terminateTPORelationship()">
          <fa-icon [icon]="faSave" style="color: #fff;"></fa-icon>
          CANCEL THIRD PARTY OPERATOR RELATIONSHIP
        </button>
        <span style="color: #1a5a96; float: right; padding-top: 10px;">
          <a routerLink="/licences">
            <fa-icon [icon]="faTrashAlt" style="color: #1a5a96;"></fa-icon>
            Return to Licences Page
          </a>
        </span>
        <div [ngBusy]="busy"></div>
      </section>
    </div>
  </div>
</div>
