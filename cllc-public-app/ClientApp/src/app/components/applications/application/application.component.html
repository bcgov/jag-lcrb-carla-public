<mat-progress-bar class="mt-1" *ngIf="!dataLoaded" mode="indeterminate"></mat-progress-bar>
<div *ngIf="application && account && dataLoaded">

  <!--LCSD-6243: 2024-02-28 waynezen: prevent deep-linking-->
  <div *ngIf="!canVisitApplicationForm()">
    <app-forbidden-modal></app-forbidden-modal>
  </div>

  <!--LCSD-6243: 2024-02-28 waynezen: prevent deep-linking-->
  <div *ngIf="canVisitApplicationForm()">

    <ng-template #applicationContent>
      <div *ngIf="account?.businessType" [ngClass]="{'hide': mode === UPLOAD_FILES_MODE || mode === INCOMPLETE}">

        <div [formGroup]="form" style="padding-left: 45px; position: relative">
          <!-- Title -->
          <h1 class="ngtest-page-title" *ngIf="!this.isOpenedByLGForApproval">
            {{ htmlContent?.title }}
            <span *ngIf="application?.applicationStatus === 'Pending for LG/FN/Police Feedback'">(Sent to LG/IN)</span>
          </h1>
          <h1 class="ngtest-page-title"
              *ngIf="this.isOpenedByLGForApproval && isShowLGINApproval">
            Provide Comment on {{application?.applicationType?.name}}
            Application
          </h1>
          <h1 class="ngtest-page-title"
              *ngIf="this.isOpenedByLGForApproval && application?.applicationType.isShowLGZoningConfirmation">
            Provide
            Confirmation of Zoning for {{application?.applicationType?.name}}
          </h1>
        </div>

        <div [formGroup]="form" class="application-wrapper">
          <!-- Preamble -->
          <section class="d-flex">

            <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
            <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
              <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.preamble"></section>
              <p>
                <fa-icon [icon]="faSave" style="margin-right: 10px;"></fa-icon>If you leave this page, the information you input
                will be saved. You can continue later from the dashboard.
              </p>
            </div>
          </section>
          <!--Picnic Area Declaration-->
          <section class="ngtest-property-details" *ngIf="application?.applicationType?.name == ApplicationTypeNames.PicnicAreaEndorsement ||
                   application?.applicationType?.name == ApplicationTypeNames.ChangetoApprovedPicnicArea">
            <h3 class="blue-header">PICNIC AREA DECLARATION</h3>
            <section class="padded-section content-bottom" *ngIf="application?.applicationType?.name == ApplicationTypeNames.PicnicAreaEndorsement">
              <div style="position: relative">
                <section>
                  <p>
                    A picnic area endorsement is an outdoor area where patrons may consume products that are purchased or obtained from the manufacturer. The picnic area must be approved by the Branch. Applicants must have zoning confirmation and approval of their proposed capacity by local government/Indigenous Nation.
                  </p>
                  <p>
                    The following applies to an endorsement for a picnic area:
                  </p>
                  <ul>
                    <li>
                      The picnic endorsement area may comprise of a single sale area and one or more consumption-only areas. The sale area may not exceed 300 square meters. The total combined area of the sale area and any consumption-only area(s) must not exceed 1000 square metres.
                    </li>
                    <li>
                      Hours of a sale area are from 9 a.m. to 6 p.m. Hours of a consumption-only area are from 9 a.m. to no later than half an hour after sunset (i.e. dusk) unless otherwise restricted by the Branch.
                    </li>
                    <li>
                      No more than 30 persons are permitted in the sale area. Person capacity for the consumption-only area must be approved by the Branch. Signage indicating the capacity of each area must be posted.
                    </li>
                    <li>
                      The sale area and any consumption-only area(s) must each have a clearly defined boundary (e.g. using fencing, trees, planters, barrels, natural flora, etc.).
                    </li>
                    <li>
                      A sale area located within the Agricultural Land Reserve must not have ground cover (e.g. paving, gravel pad, concrete, etc.) unless otherwise approved by the Agricultural Land Commission.
                    </li>
                  </ul>
                 
                  As part of this application, you are required to confirm:
                  <br />
                </section>
                <br />
                <app-field label="I have read and understand the above terms and conditions"
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicReadAndAccept')"
                           errorMessage="Please confirm have read and understand the term and conditions."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicReadAndAccept">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
                <app-field label="I confirm local zoning allows for the operation of a picnic area endorsement, including a sale area if applicable."
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicConfirmZoning')"
                           errorMessage="Please confirm local zoning allows for the operation of a picnic area endorsement."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicConfirmZoning">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
                <app-field label="I confirm my local government/Indigenous Nation supports the proposed capacity for the picnic area endorsement."
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicConfirmLGFNCapacity')"
                           errorMessage="Please confirm local government/First Nation supports the proposed capacity for the picnic area endorsement."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicConfirmLGFNCapacity">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
              </div>
            </section>

            <section class="padded-section content-bottom" *ngIf="application?.applicationType?.name == ApplicationTypeNames.ChangetoApprovedPicnicArea">
              <div style="position: relative">
                <section>
                  <p>
                    A picnic area endorsement permits outdoor areas where patrons may consume products that are purchased or obtained from the manufacturer.
                  </p>
                  <p>
                    This endorsement must be approved by the Branch, and applicants must have zoning confirmation and approval of their proposed capacity by local government/Indigenous Nation.
                  </p>
                  <p>
                    The following applies to a picnic area endorsement:
                  </p>
                  <ul>
                    <li>
                      The picnic endorsement area may comprise of a single sale area and one or more consumption-only areas. The sale area must not exceed 300 square meters. The total combined area of the sale area and any consumption-only areas must not exceed 1000 square metres.
                    </li>
                    <li>
                      Hours of a sale area are from 9 a.m. to 6 p.m. or half an hour after sunset (whichever is earlier). Once sales have ended the sale area can be used as a consumption-only area. Hours of consumption-only areas are from 9 a.m. to no later than half an hour after sunset (i.e. dusk) unless otherwise restricted by the Branch.
                    </li>
                    <li>
                      No more than 30 persons are permitted in the sale area. Person capacity for the consumption-only area must be approved by the Branch. Signage indicating the capacity of each area must be posted.
                    </li>
                    <li>
                      The sale area and any consumption-only area(s) must each have a clearly defined boundary.
                    </li>
                    <li>
                      A sale area located within the Agricultural Land Reserve must not have ground cover (e.g. paving, gravel pad, concrete, etc.) unless otherwise approved by the Agricultural Land Commission
                    </li>
                  </ul>
                  As part of this application, you are required to confirm:
                  <br />
                </section>
                <br />
                <app-field label="I have read and understand the above terms and conditions."
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicReadAndAccept')"
                           errorMessage="Please confirm have read and understand the term and conditions."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicReadAndAccept">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
                <app-field label="I confirm local zoning allows for the operation of a picnic area endorsement, including a sale area if applicable."
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicConfirmZoning')"
                           errorMessage="Please confirm local zoning allows for the operation of a picnic area endorsement."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicConfirmZoning">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
                <app-field label="I confirm my local government/Indigenous Nation supports the proposed capacity for the picnic area endorsement."
                           [isFullWidth]="true"
                           [valid]="isValidOrNotTouchedRequireTrue('picnicConfirmLGFNCapacity')"
                           errorMessage="Please confirm local government/First Nation supports the proposed capacity for the picnic area endorsement."
                           [showChevrons]="false">
                  <mat-radio-group formControlName="picnicConfirmLGFNCapacity">
                    <mat-radio-button class="mr-5" [value]="1">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="0">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>
              </div>
            </section>
          </section>

          <section *ngIf="application?.applicationType?.name=='Tied House Exemption Application'">
            <h3 class="blue-header">Manufacturer previous year production amount</h3>
            <section class="padded-section content-bottom">
              <div class="row">
                <label class="col-md-6 col-xs-12"><strong>Manufacturer production amount (less spillage) for the prevouis year:</strong></label>
                <div class="col-md-3 col-xs-12" style="align-content:start;">
                  <input class="form-control" type="number" onkeypress="return event.charCode >= 48 && event.charCode<=57" min="1"
                         formControlName="manufacturerProductionAmountForPrevYear">
                </div>
                <div class="col-md-3 col-xs-12" style="align-content:start;">
                  <select class="form-control" style="height:35px;" formControlName="manufacturerProductionAmountUnit">
                    <option value=845280000>Litres</option>
                    <option value=845280001>Hectolitres</option>
                  </select>
                </div>
              </div>
            </section>
          </section>

          <section *ngIf="application?.applicationType?.name=='Tied House Exemption Removal'">
            <h3 class="blue-header">IDENTIFY THE LICENCE TO REMOVE</h3>
            <section class="padded-section">
              <app-field label="Search for the licence you wish to remove the tied house exemption:"
                         errorMessage="Please select a value" [required]="true" [valid]="isValidOrNotTouched('assignedLicence')">
                <app-related-licence-picker (valueSelected)="onLicenceSelect($event)"></app-related-licence-picker>
              </app-field>
            </section>
            <table>
              <tr>
                <td><label>Licence Name: </label></td>
                <td><span> {{licenseToRemove?.name}}</span></td>
              </tr>
              <tr>
                <td valign="top"><label>Establishment Address: </label></td>
                <td>
                  <div>
                    {{licenseToRemove?.streetaddress}} <br>
                    {{licenseToRemove?.postalCode}}<br>
                    {{licenseToRemove?.city}}<br>
                    {{licenseToRemove?.country}}<br>
                  </div>
                </td>
              </tr>
              <tr>
                <td><label>Assigned Licensee: </label></td>
                <td><span>{{licenseToRemove?.licensee}}</span></td>
              </tr>
            </table>
          </section>

          <!-- Before Starting -->
          <h3 *ngIf="htmlContent?.beforeStarting" class="blue-header">
            BEFORE STARTING
            THE APPLICATION
          </h3>
          <section *ngIf="htmlContent?.beforeStarting" class="padded-section content-bottom">
            <app-more-less-content>
              <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.beforeStarting">
              </div>
            </app-more-less-content>

            <p *ngIf="isShowLGINApproval || application?.applicationType?.isShowLGZoningConfirmation">
              <strong *ngIf="this.account.businessType !== 'LocalGovernment'">

                Prior to payment, your application will be submitted to your local government/Indigenous Nation for their
                <span *ngIf="isShowLGINApproval">comment and assessment</span>
                <span *ngIf="application?.applicationType.isShowLGZoningConfirmation">confirmation of zoning</span>.
                Please
                ensure
                you have reviewed
                their policy
                <span *ngIf="form.get('indigenousNation').value.websiteUrl">
                  (
                  <a [href]="form.get('indigenousNation').value.websiteUrl"
                     target="_blank">
                    {{this.form.get('indigenousNation').value.websiteUrl}}
                  </a>)
                </span>
                to ensure your successful submission.
              </strong>
              <strong *ngIf="this.account.businessType === 'LocalGovernment'">
                If an LG/IN is the applicant, the Branch will gather community input and consider the regulatory criteria; the LG/IN
                is not permitted to conduct public input or provide comments on their own application. This is to prevent conflicts
                of interest. The applicant must pay any costs incurred to obtain the views of residents.
              </strong>
            </p>

            <p *ngIf="!this.isLiquor()">
              <i class="fas fa-info" style="margin-right: 10px;"></i>If you have any questions about this application, contact the
              Liquor and Cannabis Regulation Branch (LCRB) at     <a href="mailto:LCRBCannabis@gov.bc.ca">LCRBCannabis@gov.bc.ca</a>

            </p>
            <p *ngIf="this.isLiquor()">
              <i class="fas fa-info" style="margin-right: 10px;"></i>If you have any questions about this application, contact the
              Liquor and Cannabis Regulation Branch (LCRB) at     <a href="mailto:LCRBLiquor@gov.bc.ca">LCRBLiquor@gov.bc.ca</a>

            </p>

          </section>

          <!-- Local Government advise -->
          <section *ngIf="form.get('indigenousNation').value.websiteUrl && showFormControl(application?.applicationType?.lGandPoliceSelectors) && form.get('assignedLicence.id').value"
                   appRemoveIfFeatureOff="LGApprovals">
            Please review the information at
            <a target="blank"
               [href]="form.get('indigenousNation').value.websiteUrl">
              {{form.get('indigenousNation').value.websiteUrl}}
            </a>
            to ensure you have met the requirements of this application with your local government.
          </section>


          <!-- LE Document Upload Section -->
          <h3 class="blue-header" *ngIf="showLEDocumentSection()">Legal Entity Document Requirements</h3>
          <section *ngIf="showLEDocumentSection()" class="content-bottom">

            <!-- if Private Corporation -->
            <section *ngIf="this.businessTypeIsPrivateCorporation()">
              <h4>Central Securities Register (shareholder register)</h4>
              <p>
                Provide a list of all shareholders, class of shares, number of voting and non-voting per shareholder, and date
                shares issued/transferred/cancelled. See example:
              </p>
              <img src="assets/central-securities-register-example.png" style="border: solid #e0e0e0 1px; margin: 10px; width: 500px;">
              <app-file-uploader *ngIf="true || applicationId" documentType="CentralSecuritiesRegister"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedCentralSecuritiesRegisterDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD CENTRAL SECURITIES REGISTER, DRAG FILES HERE OR'">
              </app-file-uploader>
              <p>
                <strong>
                  <fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>All shareholders (individuals) holding 10% or greater voting shares in the
                  applicant corporation must submit completed <span *ngIf="this.isLiquor()">Personal History Summary</span>
                  <span *ngIf="!this.isLiquor()">
                    Cannabis Associate Security Screening
                  </span>
                  <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2"
                     target="_blank">
                    forms
                  </a>
                  below.
                </strong>
              </p>

              <hr>
              <p>
                If one of the new shareholders is a private corporation, a public corporation, a society or a partnership,
                <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2"
                   target="_blank">
                  forms
                </a>
                to support the applicable business type must be submitted, even if the shareholder holds less than
                10%
                interest in the applicant corporation:
              </p>

              <ul>
                <li>
                  Society
                  <ul>
                    <li>Current list of directors and senior managers</li>
                    <li>
                      All directors and senior managers must submit a completed Personal History Summary or Cannabis Associate Screening (see
                      below)
                    </li>
                  </ul>
                </li>
                <li>
                  Partnership
                  <ul>
                    <li>
                      List the legal names of the partners with the percentage of ownership in the partnership listed beside
                      each name
                    </li>
                    <li>
                      Each partner must supply a completed Personal History Summary or Cannabis Associate Screening (see
                      below)
                    </li>
                  </ul>
                </li>
                <li>
                  Public Corporation
                  <ul>
                    <li>List of Directors and Officers</li>
                    <li>
                      All directors must submit a completed Personal History Summary or Cannabis Associate Screening (see
                      below)
                    </li>
                  </ul>
                </li>
                <li>
                  Private Corporation
                  <ul>
                    <li>Central Securities Register</li>
                    <li>Notice of Articles</li>
                    <li>
                      Special Rights and Restrictions within the articles of incorporation that detail the class and types of
                      shares and whether or not each class or type of share has voting privileges (if the information is not
                      already included in the Notice of Articles)
                    </li>
                    <li>
                      If one of the shareholders is a private corporation, a public corporation, a society or a partnership,
                      submit all the documents listed under that business type
                    </li>
                    <li>
                      all shareholders (individuals) holding 10% or greater interest in the applicant corporation must submit
                      a completed Personal History Summary or Cannabis Associate Screening (see below)
                    </li>
                  </ul>
                </li>
                <li>
                  Other
                  <ul>
                    <li>
                      This includes entities incorporated through Federal or Provincial legislation. Examples: Local
                      Government, First Nations, colleges, universities, etc. Contact the branch to discuss
                      <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                        forms
                      </a>
                      requirements.
                    </li>

                  </ul>
                </li>
              </ul>

              <h4>Supporting Business Forms</h4>
              <p>
                Provide supporting business
                <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                  forms
                </a>
                if one or more of the shareholders is a company:
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="SupportingDocuments"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedSupportingDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD SUPPORTING DOCUMENTS, DRAG FILES HERE OR'">
              </app-file-uploader>
              <hr>
            </section>

            <!-- If Private Corporation, Public Corporation or Societies-->
            <section *ngIf="this.businessTypeIsCorporation() || this.businessTypeIsSociety()">
              <h4 *ngIf="this.businessTypeIsCorporation()">Notice of Articles (or Register of Directors and Officers)</h4>
              <h4 *ngIf="this.businessTypeIsSociety()">List of Directors and Officers</h4>
              <p>Provide the Notice of Articles for your <span *ngIf="this.businessTypeIsSociety()">Society</span><span *ngIf="this.businessTypeIsCorporation()">Corporation</span>. Alternatively, you can provide list of all current directors/officers by full legal name, position and date of appointment.</p>
              <p *ngIf="this.isLiquor() && !this.businessTypeIsSociety()">
                <strong>Directors and Officers are <u>not</u> required to submit a Personal History Summary form for liquor-related applications.</strong>
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="NOA"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedNOA = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD NOTICE OF ARTICLES, DRAG FILES HERE OR'">
              </app-file-uploader>
              <p *ngIf="!this.isLiquor()">
                <strong><fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>All directors must submit a completed Cannabis Associate Security Screening form below.</strong>
              </p>
            </section>

            <!-- Sole Proprietor-->
            <section *ngIf="this.businessTypeIsSoleProp()">
              <p>
                <fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>Sole proprietors must complete a
                <span *ngIf="this.isLiquor()">
                  Personal History
                  Summary
                </span><span *ngIf="!this.isLiquor()">Cannabis Associate Security Screening</span>
                <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                  forms
                </a> below.
              </p>
            </section>

            <!-- Partnership-->
            <section *ngIf="this.businessTypeIsPartnership()">
              <h4>Partnership Agreement</h4>
              <p>Provide a copy of your partnership agreement.</p>
              <p>
                <fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>Each partner must submit a completed
                <span *ngIf="this.isLiquor()">
                  Personal
                  History Summary
                </span><span *ngIf="!this.isLiquor()">Cannabis Associate Security Screening</span> form below.
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="PartnershipAgreement"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedPartnershipAgreement = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD PARTNERSHIP AGREEMENT, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>

            <!-- OtherType BusinessType-->
            <section *ngIf="account.isOtherBusinessType()">
              <h4>Organizational Leadership</h4>

              <p>
                Please upload official <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                  forms
                </a> that describes your organization's ownership and leadership structure.
              </p>
              <p>
                <fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>
                <span>
                  Organizational leadership must provide completed Personal History Summary <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                    forms
                  </a>
                </span>
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="OrganizationDetails"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedOrganizationDetails = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD ORGANIZATION DETAILS, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>

            <!-- Other -->
            <section *ngIf="!this.businessTypeIsPartnership()
  && !this.businessTypeIsCorporation()
  && !this.businessTypeIsSoleProp()
  && !this.businessTypeIsSociety()
  && !account.isOtherBusinessType()">
              <h4>Legal Entity Forms</h4>
              <p>
                Entities incorporated under federal or provincial legislation; example: local governments, First Nation,
                colleges, universities, etc. may have unique requirements. Please contact the Licensing Help Desk at
                1-866-209-2111 to discuss further <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                  forms
                </a> requirements
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="OtherTypes" fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedOtherDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD SUPPORTING DOCUMENTS, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>
            <!-- personal disclosure documents-->


            <section *ngIf="this.isLiquor()">
              <h3 class="blue-header"><fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>Personal History Summary Forms</h3>
              <div class="content-bottom">

                <p>
                  Each person involved in the applicant’s legal entity structure must submit a Personal History
                  Summary
                  form and a copy of
                  your Criminal Record Search completed by the RCMP or local Police Department. The form may also
                  require
                  you to submit copy
                  of your driver’s abstract or a statutory declaration. See the form for full details.
                </p>


                <h4>Personal History Summary Documents</h4>
                <p>
                  Each liquor affiliate must provide a complete
                  <a href="https://www2.gov.bc.ca/assets/gov/employment-business-and-economic-development/business-management/liquor-regulation-licensing/forms/lcrb004_personal_history_summary.pdf"
                     target="_blank">
                    Personal History Summary Form
                  </a>.
                </p>
                <app-file-uploader *ngIf="application?.id" documentType="PHS"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
                                   [extensions]="['pdf']" (numberOfUploadedFiles)="uploadedPHS = $event"
                                   [entityId]="application.id"
                                   [uploadHeader]="'TO UPLOAD PERSONAL HISTORY SUMMARY FORMS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </div>
            </section>

            <!-- Cannabis Associate Security Screening Forms -->
            <section *ngIf="!this.isLiquor()">
              <h3 class="blue-header"><fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>Cannabis Associate Security Screening Forms</h3>
              <div class="content-bottom">
                <p>
                  Sole proprietors and associates of applicants for a retail licence or authorization are required to
                  submit <a href="https://www2.gov.bc.ca/gov/content?id=B8E6EBE15A594CB7832B490C0A2815B2" target="_blank">
                    forms
                  </a> for security screenings and financial integrity checks. {{ application?.applicationType?.name === ApplicationTypeNames.Marketer ? 'Cannabis Marketing' : 'Retail store licence or authorization' }} applications
                  cannot be processed until all required materials have been received.
                </p>

                <p *ngIf="this.isLiquor()">
                  Cannabis Associate Security Screening forms are not required if you submit liquor related applications.
                  Missing forms or documents will be requested once your application is received.
                  <!--If you do not provide
          Cannabis Associate Security Screening documents prior to your application submission, they will be
          requested via secure channels
          once your application has been received. Please note that the time to collect these documents
          directly
          impacts the time to process your application.-->
                </p>

                <p>
                  Please provide the
                  <a href="https://www2.gov.bc.ca/gov/content/employment-business/business/liquor-regulation-licensing/non-medical-cannabis-licenses/cannabis-resources-information/associate-forms"
                     target="_blank">
                    documents
                  </a>
                  as outlined on the website.
                </p>

                <h4>
                  Cannabis Associate Security Screening
                </h4>
                <p>
                  Each associate must provide a complete Cannabis Associate Security Screening form.
                  <app-file-uploader *ngIf="application?.id" documentType="CAS" fileTypes="FILE MUST BE IN PDF FORMAT."
                                     [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                     (numberOfUploadedFiles)="uploadedCAS = $event" [entityId]="application.id"
                                     [uploadHeader]="'TO UPLOAD CANNABIS ASSOCIATES DOCUMENTS, DRAG FILES HERE OR'">
                  </app-file-uploader>
                  <div *ngIf="application?.applicationType?.name != ApplicationTypeNames.Marketer">
                    <h4>Financial Integrity Documents</h4>
                    <p>
                      Each associate must provide a complete a
                      <a href="https://www2.gov.bc.ca/assets/gov/employment-business-and-economic-development/business-management/liquor-regulation-licensing/cannabis-forms/form-cannabis-retail-store-fin-integrity--associate.pdf">
                        Financial
                        Integrity Form
                      </a>.
                    </p>
                    <app-file-uploader *ngIf="application?.id" documentType="FinancialIntegrity"
                                       fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
                                       [extensions]="['pdf']" (numberOfUploadedFiles)="uploadedFinancialIntegrity = $event"
                                       [entityId]="application.id"
                                       [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY DOCUMENTS, DRAG FILES HERE OR'">
                    </app-file-uploader>
                  </div>
              </div>
            </section>


            <!-- private corporations need to provide the names of shareholders with less than 10% interest-->
            <section *ngIf="this.businessTypeIsPrivateCorporation()">
              <h4>Shareholders (individuals) Holding Less Than 10% Interest (or Non-Voting Shareholders)</h4>
              <p>
                Shareholders (individuals) holding less than 10% interest, or shareholders with only non-voting shares, in the applicant corporation must provide their full
                legal name and date of birth. They do not need to provide a Personal History Summary or Cannabis Associate Security Screening form.
              </p>
              <app-file-uploader *ngIf="true || applicationId" documentType="IndividualsWithLessThan10"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application" [extensions]="['pdf']"
                                 (numberOfUploadedFiles)="uploadedIndividualsWithLessThan10 = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD LIST OF INDIVIDUALS WITH 10% OR LESS INTEREST, DRAG FILE HERE OR'">
              </app-file-uploader>
            </section>

          </section>
          <!-- LCSD-6355 Upload Declarations section -->
          <div *ngIf="application?.applicationType.name == 'Special Event Area Endorsement'">
            <h3 class="blue-header ngtest-declarations">
              Requirements For Operating A Special Event Area Endorsement
            </h3>
            <div class="padded-section content-bottom">
              <ng-container>
                <section>
                  <div>
                    <p>
                      The special event area endorsement allows for the hosting of special events such as weddings, concerts, private parties or promotional events open to the public within a designated area.
                    </p>
                    <p>
                      The following applies to the endorsement of a Special Event Area:
                    </p>
                    <ul style="display: inline-block">
                      <li>A special event area (SEA) may be located in any area on the manufacturing site, including, in whole or in part, in: an area designated as a sampling room, an on-site store, a lounge or any other endorsement area, and/or a production area.</li>
                      <li>If the SEA overlaps the picnic area, service is permitted within that area during the special event only, and the picnic area is considered closed.</li>
                      <li>SEAs with a patio must meet patio policy requirements and be designed and located to prevent noise disturbances to nearby residents.</li>
                      <li>This endorsement is event-driven only and is not intended to be an extension or an alternative to a lounge.</li>
                      <li>Bounding is required for any outdoor area and for the duration of the event.</li>

                    </ul>
                    <p>
                      Licensees are expected to review and understand all relevant regulatory requirements established in the Liquor Control and Licensing Act, Liquor Control and Licensing Regulation, and the relevant Terms and Conditions Handbook.
                    </p>
                    <p>
                      As part of this application, you are required to confirm:
                    </p>
                  </div>
                </section>

                <mat-checkbox formControlName="uploadDeclarations">
                  I have read and understand the above terms and conditions.
                </mat-checkbox>

              </ng-container>
            </div>
          </div>
          <div *ngIf="application?.applicationType.name == 'Lounge Area Endorsement'">
            <h3 class="blue-header ngtest-declarations">
              Requirements For Operating A Lounge Area Endorsement
            </h3>
            <div class="padded-section content-bottom">
              <ng-container>
                <section>
                  <div>
                    <p>
                      The lounge endorsement permits the sale and service of liquor for on-site consumption in a designated lounge area on the manufacturing site.
                    </p>
                    <p>
                      The following applies to the endorsement of a Lounge Area:
                    </p>
                    <ul style="display: inline-block">
                      <li>A lounge may include an indoor lounge area, a standalone patio area, or both. A lounge may be located, in whole or in part, in an area designated as a sampling area, an on-site store, and a Special Event Area.</li>
                      <li>Manufacturers must provide, at a minimum, a variety of hot or cold snacks and non-alcoholic beverages during all hours of operation for the lounge endorsement area.</li>
                      <li>Live or recorded music, radio, television and dancing are permitted in your lounge area endorsement, unless it is otherwise restricted by the Branch or unsuitable for minors.</li>
                      <li>Manufacturers are responsible for determining the potential for noise and other types of disturbances to nearby residents. It is the responsibility of the manufacturer to have measures in place to ensure nearby residents are not disturbed by the establishment or patrons of the establishment.</li>
                      <li>Manufacturers may sell any kind of liquor for onsite consumption in your approved lounge area endorsement, provided the cost to purchase liquor from other manufacturers does not exceed 20% of the total value of liquor purchased for the lounge area endorsement in any given quarter.</li>

                    </ul>
                    <p>
                      Licensees are expected to review and understand all relevant regulatory requirements established in the Liquor Control and Licensing Act, Liquor Control and Licensing Regulation, and the relevant Terms and Conditions Handbook.
                    </p>
                    <p>
                      As part of this application, you are required to confirm:
                    </p>
                  </div>
                </section>

                <mat-checkbox formControlName="uploadDeclarations">
                  I have read and understand the above terms and conditions.
                </mat-checkbox>

              </ng-container>

            </div>
          </div>
          <!-- Establishment Name -->
          <section class="ngtest-property-details" *ngIf="application?.applicationType?.showPropertyDetails">
            <h3 class="blue-header">ESTABLISHMENT DETAILS</h3>
            <section class="padded-section content-bottom">
              <div style="position: relative">

                <section *ngIf="application?.applicationType?.establishmentName === FormControlState.Show || application?.applicationType?.establishmentName === FormControlState.ReadOnly">

                  <label *ngIf="application?.applicationType?.establishmentName === FormControlState.ReadOnly" for="">Establishment Name</label>
                  <label *ngIf="application?.applicationType?.establishmentName !== FormControlState.ReadOnly" for="">Proposed Establishment Name</label>
                  <label *ngIf="application?.applicationType?.establishmentName !== FormControlState.ReadOnly" class="error-states ng-star-inserted">*</label>
                  <br>

                  <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                    A name cannot mislead the public about what kind of business the licensee or authorization holder operates. The name cannot
                    imply a
                    licensee or authorization holder is selling medical cannabis, and cannot include words in any form or combination or manner
                    the
                    words "apothecary", "pharmacy", "medicines", "drugs", "drug store", "drug department", "dispensary"
                    or any other words of similar meaning that imply licensing under the Pharmacy Operations and Drug
                    Scheduling Act. Store names cannot also use language that encourages intoxication.
                  </p>

                  <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                    Additionally, a name cannot imply an association with another business. This applies to signs,
                    trademarks and any type of branding.
                  </p>

                  <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                    Establishment names will be reviewed for approval during the application process. For more
                    information,
                    please see the
                    <a href="https://www2.gov.bc.ca/gov/content?id=D9D4E17753654DE790C0AE104E3B11A6" target="_blank">
                      Cannabis Store Name Approval Process.
                    </a>
                    &nbsp; <a href="https://www2.gov.bc.ca/gov/content?id=3BA008CC60AE436FBD25309AB6C1C9F0" target="_blank">Check the LCRB’s website</a> for a list of all currently licensed cannabis stores in British
                    Columbia.
                  </p>
                </section>
                <div *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                  <app-field *ngIf="showFormControl(application?.applicationType?.establishmentName)"
                             [label]="getEstablishmentLabel(application?.applicationType)" [required]="true"
                             [valid]="isValidOrNotTouched('establishmentName')"
                             errorMessage="{{form.get('establishmentName').errors && form.get('establishmentName').errors['forbiddenName'] ? 'The store name contains at least one word that doesn’t comply with naming requirements. The application can’t be submitted until the prohibited word(s) are removed.' : 'Establishment Name is a required field'}}">
                    <input class="form-control" style="width: 500px;" type="text"
                           (change)="checkPossibleProblematicWords()" formControlName="establishmentName"
                           id="establishmentName">
                  </app-field>
                  <!--[readonly]="application?.applicationType?.establishmentName === FormControlState.ReadOnly"-->
                  <div *ngIf="possibleProblematicNameWarning" class="warning-state">
                    Caution: The store name might contain at least one word that doesn’t comply with the naming
                    requirements.
                    Double check the store name before submitting the application.
                  </div>
                </div>
                <!-- Non Cannabis Establishment Name input-->
                <div *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization'">
                  <!-- <label for="">Establishment Name</label> -->
                  <app-field *ngIf="showFormControl(application?.applicationType?.establishmentName)" [required]="true">
                    <input class="form-control" style="width: 500px;" type="text"
                           [readonly]="application?.applicationType?.establishmentName === FormControlState.ReadOnly"
                           formControlName="establishmentName" id="establishmentName">
                  </app-field>
                  <p *ngIf="application?.applicationType?.establishmentName !== FormControlState.ReadOnly">Establishment names are subject to approval by LCRB</p>
                  <p *ngIf="canRenameEstablishment()">
                    As part of the application, you can change the name of the establishment.
                    <strong>If the name of the establishment is changing, you must provide a drawing or a photo of your proposed establishment sign below.</strong>
                  </p>
                </div>

              </div>
              <div formGroupName="assignedLicence"
                   *ngIf="showFormControl(application?.applicationType?.currentEstablishmentAddress)">
                <h3 class="blue-header">{{application?.licenseType}} LOCATION ADDRESS</h3>
                <div class="content-bottom">
                  <p>The establishment is currently located at the following address:</p>
                  <address class="row">
                    <app-field class="col-md-12 col-xs-12" label="Address" [isFullWidth]="true">
                      <input class="form-control" type="text" readonly formControlName="establishmentAddressStreet"
                             id="establishmentAddressStreet">
                    </app-field>
                    <app-field class="col-md-4 col-xs-12" label="City" [isFullWidth]="true">
                      <input class="form-control" type="text" readonly formControlName="establishmentAddressCity"
                             id="establishmentAddressCity">
                    </app-field>
                    <section class="col-md-4 col-xs-12">
                      <app-field label="Province" [isFullWidth]="true">
                        <input class="form-control" readonly type="text" value="British Columbia">
                      </app-field>
                    </section>
                    <section class="col-md-4 col-xs-12">
                      <app-field label="Postal Code">
                        <input class="form-control" type="text" readonly formControlName="establishmentAddressPostalCode"
                               id="establishmentAddressPostalCode">
                      </app-field>
                    </section>
                    <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                      <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
                    </app-field>
                  </address>
                  <div class="light-blue-bg" style="display: flex;">
                    <div style="flex: 0 0 210px;">
                      <app-field label="Parcel Identifier (PID)">
                        <input type="text" readonly class="form-control" (keydown)="rejectIfNotDigitOrBackSpace($event)"
                               style="width: 200px;" formControlName="establishmentParcelId"
                               id="establishmentParcelId">
                      </app-field>
                    </div>
                  </div>
                </div>
              </div>

              <h3 class="blue-header" *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)">
                ADDRESS
              </h3>

              <div class="ngtest-new-address content-bottom"
                   *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)">
                <p *ngIf="application?.licenseType !== 'Rural Agency Store'">
                  The proposed location of the establishment:
                </p>
                <p *ngIf="application?.licenseType === 'Rural Agency Store'">
                  Include any information necessary for finding
                  the
                  site (i.e. route number, mile marker, etc.).
                </p>
                <address class="row">
                  <app-field class="col-md-12 col-xs-12" label="Address" [required]="true" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('establishmentAddressStreet')"
                             errorMessage="Please enter the street address">
                    <input class="form-control" type="text" autocomplete="address-line1"
                           formControlName="establishmentAddressStreet" id="establishmentAddressStreet">
                  </app-field>
                  <app-field class="col-md-4 col-xs-12" label="City" [required]="true" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('establishmentAddressCity')" errorMessage="Please enter the city">
                    <input class="form-control" type="text" autocomplete="address-level2"
                           formControlName="establishmentAddressCity" id="establishmentAddressCity">
                  </app-field>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Province" [isFullWidth]="true">
                      <input class="form-control" autocomplete="address-level1" readonly type="text"
                             value="British Columbia">
                    </app-field>
                  </section>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Postal Code" [required]="true" [isFullWidth]="true"
                               [valid]="isValidOrNotTouched('establishmentAddressPostalCode')"
                               errorMessage="Please enter the postal code">
                      <input class="form-control" type="text" autocomplete="postal-code"
                             formControlName="establishmentAddressPostalCode" id="establishmentAddressPostalCode">
                    </app-field>
                  </section>
                  <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                    <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
                  </app-field>
                </address>

                <app-field label="Is the proposed establishment on Treaty First Nation Land?"
                           *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)"
                           [valid]="isValidOrNotTouched('isOnINLand')" [showChevrons]="false" [isFullWidth]="true">
                  <mat-radio-group formControlName="isOnINLand">
                    <mat-radio-button class="mr-5" [value]="true">Yes</mat-radio-button>
                    <mat-radio-button class="mr-5" [value]="false">No</mat-radio-button>
                  </mat-radio-group>
                </app-field>

                <app-field label="PIN" [valid]="isValidOrNotTouched('pin')" *ngIf="form.get('isOnINLand').value"
                           errorMessage="Please enter the PIN"
                           [valid]="isValidOrNotTouched('pin')" [showChevrons]="false" [isFullWidth]="true">
                  <input type="text" class="form-control" style="width: 200px;" (keydown)="rejectIfNotDigitOrBackSpace($event)"
                         maxlength="9" formControlName="pin" id="pin">
                </app-field>

                <div class="light-blue-bg" style="display: flex;">
                  <div style="flex: 0 0 210px;">
                    <app-field label="Parcel Identifier (PID)" [valid]="isValidOrNotTouched('establishmentParcelId')"
                               errorMessage="Please enter the Parcel Identifier (format: 9 digits)">
                      <input type="text" class="form-control" style="width: 200px;"
                             (keydown)="rejectIfNotDigitOrBackSpace($event)" maxlength="9"
                             formControlName="establishmentParcelId" id="establishmentParcelId">
                    </app-field>
                  </div>

                  <div style="flex: 1; font-size: 11px;">
                    <span>
                      <span>
                        <fa-icon [icon]="faExclamationCircle" style="margin-right: 10px;"></fa-icon>The property’s PID may be
                        found
                        on
                      </span> <br>
                      <ul style="display: inline-block">
                        <li>The title to the property</li>
                        <li>Through the B.C. Land Title and Survey Authority</li>
                        <li>The tax assessment notice from BC Assessment</li>
                      </ul>
                    </span>

                    <ul style="display: inline-block">
                      <li>BC Assessment’s e-valueBC website </li>
                      <li>The municipal tax notice</li>
                      <li>The property lease</li>
                    </ul>
                  </div>
                </div>
                <p>&nbsp;</p>

                <section *ngIf="application && form && application?.licenseType === 'Manufacturer'">
                  <app-additional-pids [application]="application" [form]="form">
                  </app-additional-pids>
                </section>
                <hr>

                <!-- Proof of Zoning-->
                <section *ngIf="showZoning()">
                  <app-proof-of-zoning *ngIf="application" [application]="application" [formGroup]="form" #proofOfZoning>
                  </app-proof-of-zoning>
                  <hr>
                </section>

                <section>
                  <app-field label="Is your establishment located on the Agricultural Land Reserve (ALR)?"
                             [valid]="isValidOrNotTouched('isAlr')" [showChevrons]="false" errorMessage="Specify ALR status" [isFullWidth]="true"
                             *ngIf="application?.applicationType?.hasALRQuestion">
                    <mat-radio-group formControlName="isAlr">
                      <mat-radio-button class="mr-5" [value]="true">Yes</mat-radio-button>
                      <mat-radio-button class="mr-5" [value]="false">No</mat-radio-button>
                    </mat-radio-group>
                  </app-field>
                  <div *ngIf="this.form.get('isAlr').value === true">
                    <div class="flex-grow-0" style="background-color: #FFB2B2; width: 50px;"></div>
                    <div class="flex-grow-1 p-3" style="background-color: #FFE5E5; padding: 20px;">
                      <p>
                        <strong>
                          By submitting this application to LCRB, you are confirming that your licenced establishment
                          will adhere to the requirements laid out in the
                          <a href="http://www.bclaws.ca/civix/document/id/complete/statreg/30_2019" target="_blank">
                            Agricultural Land
                            Reserve (ALR) Use Regulation
                          </a>.
                        </strong>
                      </p>
                    </div>
                  </div>
                </section>

              </div>
            </section>
          </section>

          <!-- Federal Production Information -->
          <section class="ngtest-property-details" *ngIf="requiresFederalProductionInfo()">
            <h3 class="blue-header">FEDERAL PRODUCTION INFORMATION</h3>
            <section class="padded-section content-bottom">
              <div style="position: relative">
                <div>
                  <app-field [required]="true" label="Federal Licence Number" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('federalLicenceNumber')"
                             errorMessage="Please enter the Federal licence number">
                    <input class="form-control" type="text" formControlName="federalLicenceNumber" id="federalLicenceNumber">
                  </app-field>
                  <app-field [required]="true" label="Federal Licence Name" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('federalLicenceName')"
                             errorMessage="Please enter the Federal licence name">
                    <input class="form-control" type="text" formControlName="federalLicenceName" id="federalLicenceName">
                  </app-field>
                </div>
              </div>
              <h3 class="blue-header">
                ADDRESS
              </h3>
              <div class="ngtest-new-address content-bottom">
                <p>
                  The location of the federal production site:
                </p>
                <address class="row">
                  <app-field class="col-md-12 col-xs-12" label="Address" [required]="true" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('fpAddressStreet')"
                             errorMessage="Please enter the street address">
                    <input class="form-control" type="text" autocomplete="address-line1"
                           formControlName="fpAddressStreet" id="fpAddressStreet">
                  </app-field>
                  <app-field class="col-md-4 col-xs-12" label="City" [required]="true" [isFullWidth]="true"
                             [valid]="isValidOrNotTouched('fpAddressCity')" errorMessage="Please enter the city">
                    <input class="form-control" type="text" autocomplete="address-level2"
                           formControlName="fpAddressCity" id="fpAddressCity">
                  </app-field>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Province" [isFullWidth]="true">
                      <input class="form-control" autocomplete="address-level1" readonly type="text"
                             value="British Columbia">
                    </app-field>
                  </section>
                  <section class="col-md-4 col-xs-12">
                    <app-field label="Postal Code" [required]="true" [isFullWidth]="true"
                               [valid]="isValidOrNotTouched('fpAddressPostalCode')"
                               errorMessage="Please enter the postal code">
                      <input class="form-control" type="text" autocomplete="postal-code"
                             formControlName="fpAddressPostalCode" id="fpAddressPostalCode">
                    </app-field>
                  </section>
                  <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                    <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
                  </app-field>
                </address>
              </div>
            </section>
          </section>

          <section>
            <div *ngIf="application?.applicationType?.name.includes('Tied House Exemption Application')">
              <h3 class="blue-header">Tied House Manufacturer Licence</h3>
              <app-field [required]="false">
                <input class="form-control" style="width: 500px;" type="text" [readonly]="true"
                       formControlName="relatedLicenceNumber">
              </app-field>
            </div>
          </section>

          <!-- Letter of Intent -->
          <section *ngIf="showFormControl(application?.applicationType?.letterOfIntent) && application?.applicationType.name != 'Lounge Area Endorsement' && application?.applicationType.name != 'Special Event Area Endorsement'">
            <div [ngSwitch]="application?.applicationType?.name">
              <h3 class="blue-header" *ngSwitchCase="'Sales to Hospitality Licensees'">Authorization Form</h3>
              <h3 class="blue-header" *ngSwitchCase="'Temporary Expanded Service Areas (FP)'">Local Government/Indigenous Nation Comments</h3>
              <h3 class="blue-header" *ngSwitchDefault>Letter of Intent</h3>
            </div>

            <section class="content-bottom">
              <div *ngIf="htmlContent.letterOfIntent && !application?.termConditionId">
                <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.letterOfIntent"></section>
              </div>

              <!-- Request Change to Term / Condition -->
              <section *ngIf="application?.termConditionId">



                <app-field label="Term & Condition to be changed" [required]="false">
                  <textarea readonly style="width: 800px;" class="form-control"
                            formControlName="termConditionOriginalText"></textarea>
                </app-field>
                <app-field label="Describe reason for change" errorMessage="Please enter the reason for the change">
                  <textarea style="width: 800px;" class="form-control" formControlName="description2"></textarea>
                </app-field>

                <div *ngIf="htmlContent.letterOfIntent">
                  <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.letterOfIntent"></section>
                </div>


              </section>

              <section>

                <app-file-uploader *ngIf="application?.id && !application?.applicationType?.name.includes('Temporary Expanded')" documentType="letterOfIntent"
                                   [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [useDocumentTypeForName]="true"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
                                   [extensions]="['pdf']"
                                   (numberOfUploadedFiles)="uploadedletterOfIntentDocuments = $event" [entityId]="application?.id"
                                   [uploadHeader]="'TO UPLOAD LETTER OF INTENT, DRAG FILES HERE OR'">
                </app-file-uploader>

                <app-file-uploader *ngIf="applicationId && application?.applicationType?.name.includes('Temporary Expanded')" documentType="letterOfIntent"
                                   [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [useDocumentTypeForName]="true"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application" [extensions]="['pdf']"
                                   (numberOfUploadedFiles)="uploadedletterOfIntentDocuments = $event" [entityId]="applicationId"
                                   [uploadHeader]="'TO UPLOAD LG/IN COMMENTS, DRAG FILES HERE OR'">
                </app-file-uploader>

              </section>
            </section>
          </section>


          <!-- Local Government and Police Jurisdiction -->
          <section class="pt-3" *ngIf="showFormControl(application?.applicationType?.lGandPoliceSelectors)"
                   appRemoveIfFeatureOff="LGApprovals">

            <h3 class="blue-header">Local Government/Indigenous Nation and Police Jurisdiction </h3>
            <div class="content-bottom">
              <p>
                Enter the
                <a href="https://www2.gov.bc.ca/gov/content?id=B5744089A70F428FA189E5FF5CAE4E4A"
                   target="_blank">
                  local government or Indigenous Nation
                </a>
                and police jurisdiction where the establishment will be located. Suggestions will be provided
                after you type the first three characters of the name.
              </p>

              <app-field label="Local Government/Indigenous Nation" [required]="false"
                         [valid]="isValidOrNotTouched('indigenousNation')" errorMessage="Please select a value">
                <input type="text" class="form-control" style="width: 500px;"
                       placeholder="Type to search and then select a value" formControlName="indigenousNation"
                       [matAutocomplete]="lgAutoCompleteBox" #lgAutoCompleteTrigger>
                <mat-autocomplete #lgAutoCompleteBox="matAutocomplete" [displayWith]="autocompleteDisplay">
                  <mat-option *ngFor="let item of autocompleteLocalGovernmemts" [value]="item">
                    {{item.name}}
                  </mat-option>
                </mat-autocomplete>
                <br>
                <mat-progress-bar *ngIf="INRequestInProgress" mode="indeterminate"></mat-progress-bar>
              </app-field>
              <section>
                <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
                <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
                  <section *ngIf="form.get('indigenousNation').value.id">

                    <mat-card class="mb-3">
                      <label for="">Selected Local Government/Indigenous Nation </label>
                      <div class="ml-2">
                        <label for="" class="mr-2">Name:</label>
                        <span>{{form.get('indigenousNation').value.name}}</span>
                      </div>

                      <div class="ml-2" *ngIf="form.get('indigenousNation').value.websiteUrl">
                        <label class="mr-2">Website:</label>
                        <a target="blank"
                           [href]="form.get('indigenousNation').value.websiteUrl">
                          {{form.get('indigenousNation').value.websiteUrl}}
                        </a>
                      </div>
                    </mat-card>


                    <p *ngIf="form.get('indigenousNation').value.websiteUrl">
                      <strong>
                        Please review the information at
                        <a target="blank"
                           [href]="form.get('indigenousNation').value.websiteUrl">
                          {{form.get('indigenousNation').value.websiteUrl}}
                        </a>
                        to ensure you meet the requirements of this application with your local government. You may
                        need to contact them
                        prior to submitting to ensure your successful submission.
                      </strong>
                    </p>
                    <p *ngIf="!form.get('indigenousNation').value.websiteUrl">
                      <strong>
                        Please ensure you have made yourself familiar with the application requirements for
                        this local
                        government (or Indigenous Nation) prior to submitting your application. You may need to
                        contact them prior to submitting to ensure your
                        successful submission.
                      </strong>
                    </p>
                  </section>

                  <section *ngIf="!form.get('indigenousNation').value.id">
                    No Local Government/Indigenous Nation selected
                  </section>

                </div>
              </section>

              <br><br>
              <app-field label="Police Jurisdiction" [required]="false"
                         [valid]="isValidOrNotTouched('policeJurisdiction')" errorMessage="Please select a value">
                <input type="text" class="form-control" style="width: 500px;"
                       placeholder="Type to search and then select a value" formControlName="policeJurisdiction"
                       [matAutocomplete]="pdAutocompleteBox" #pdAutoCompleteTrigger>
                <mat-autocomplete #pdAutocompleteBox="matAutocomplete" [displayWith]="autocompleteDisplay">
                  <mat-option *ngFor="let item of autocompletePoliceDurisdictions" [value]="item">
                    {{item.name}}
                  </mat-option>
                </mat-autocomplete>
                <br>
                <mat-progress-bar *ngIf="policeJurisdictionReqInProgress" mode="indeterminate"></mat-progress-bar>
              </app-field>
              <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
                <section *ngIf="form.get('policeJurisdiction').value.id">
                  <mat-card class="mb-3">
                    <label for="">Selected Police Jurisdiction </label>
                    <div class="ml-2">
                      <label for="" class="mr-2">Name:</label>
                      <span>{{form.get('policeJurisdiction').value.name}}</span>
                    </div>
                  </mat-card>
                </section>

                <section *ngIf="!form.get('policeJurisdiction').value.id">
                  No Police Jurisdiction selected
                </section>
              </div>
            </div>
          </section>


          <!-- Proof of Zoning-->
          <section *ngIf="showZoning() && !showFormControl(application?.applicationType?.newEstablishmentAddress)">
            <app-proof-of-zoning *ngIf="application" [application]="application" [formGroup]="form" #proofOfZoning>
            </app-proof-of-zoning>
            <hr>

            <section *ngIf="application?.applicationType?.hasALRQuestion">
              <app-field label="Is your establishment located on the Agricultural Land Reserve (ALR)?"
                         [valid]="isValidOrNotTouched('isAlr')" [showChevrons]="false" errorMessage="Specify ALR status"
                         [isFullWidth]="true">
                <mat-radio-group formControlName="isAlr">
                  <mat-radio-button class="mr-5" [value]="true">Yes</mat-radio-button>
                  <mat-radio-button class="mr-5" [value]="false">No</mat-radio-button>
                </mat-radio-group>
              </app-field>
              <div *ngIf="application.licenseType === 'Manufacturer' && this.form.get('isAlr').value === true">
                <div class="flex-grow-0" style="background-color: #FFB2B2; width: 50px;"></div>
                <div class="flex-grow-1 p-3" style="background-color: #FFE5E5; padding: 20px;">
                  <p>
                    <strong>
                      By submitting this application to LCRB, you are confirming that your licenced establishment
                      will adhere to the requirements laid out in the
                      <a href="http://www.bclaws.ca/civix/document/id/complete/statreg/30_2019"
                         target="_blank">
                        Agricultural Land Reserve (ALR) Use Regulation
                      </a>.
                    </strong>
                  </p>
                </div>
              </div>
            </section>
          </section>

          <!-- Store Contact Info -->
          <section *ngIf="showFormControl(application?.applicationType?.storeContactInfo)">
            <h3 class="blue-header">Establishment Contact Details</h3>
            <div style="flex: 0 0 210px;" class="content">
              <p>The phone and email address used to contact your establishment:</p>
              <app-field label="Establishment Email" [required]="false" [valid]="isValidOrNotTouched('establishmentEmail')"
                         errorMessage="Please enter an email address">
                <input type="text" class="form-control" style="width: 200px;" autocomplete="email"
                       [readonly]="application?.applicationType?.storeContactInfo === FormControlState.ReadOnly"
                       formControlName="establishmentEmail" id="establishmentEmail">
              </app-field>
            </div>
            <div style="flex: 0 0 210px;" class="content-bottom">
              <app-field label="Establishment Phone" [required]="false" [valid]="isValidOrNotTouched('establishmentPhone')"
                         errorMessage="Please enter a phone number ">
                <input type="text" class="form-control" style="width: 200px;" mask="(000) 000-0000" autocomplete="tel"
                       [readonly]="application?.applicationType?.storeContactInfo === FormControlState.ReadOnly"
                       formControlName="establishmentPhone" id="establishmentPhone">
              </app-field>
            </div>
            <p>&nbsp;</p>
          </section>
          <!-- Business Plan for Manufacturers-->

          <section *ngIf="application && form && application?.applicationType?.name === 'Manufacturer'">
            <app-business-plan *ngIf="application" [application]="application" [form]="form">
            </app-business-plan>

          </section>

          <!--2024-02-21 LCSD-6975 waynezen: new logic to display isHasPatio-->
          <div *ngIf="!isPatioActive(application?.applicationType) && application?.applicationType?.showPatio">
            <app-field label="Will the establishment have a patio?"
                       [valid]="isValidOrNotTouched('isHasPatio')" [showChevrons]="false" errorMessage="Specify if application will have a patio"
                       [isFullWidth]="true">
              <mat-radio-group formControlName="isHasPatio">
                <mat-radio-button class="mr-5" [value]="true">Yes</mat-radio-button>
                <mat-radio-button class="mr-5" [value]="false">No</mat-radio-button>
              </mat-radio-group>
            </app-field>
          </div>

          <div *ngIf="htmlContent.patio && showDynamicForm(application?.applicationType?.formReference, dynamicsForm?.tabs)">
            <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.patio"></section>
          </div>

          <!-- Dynamic form details-->
          <section *ngIf="showDynamicForm(application?.applicationType?.formReference, dynamicsForm?.tabs)">
            <h3 class="blue-header">Application Details</h3>
            <!-- for each formTab on the linked form-->
            <div *ngFor="let formTab of dynamicsForm.tabs" class="content">
              <!-- for each section on the linked formTab-->
              <div *ngFor="let formSection of formTab.sections; let i = index;">
                <!-- if the section is marked visible-->
                <div *ngIf="formSection.visible" class="padded-section">
                  <!-- show it on the page-->
                  <!--section class="padded-section">
          <!-- display the section name as a label-->
                  <label for="" *ngIf="formSection.name">{{formSection.name}}</label>
                  <!-- for each field on the section-->
                  <div *ngFor="let formField of formSection.fields">
                    <!-- if the field is visible-->
                    <section *ngIf="formField.visible">
                      <!-- if it's a textbox, show it like a text box-->
                      <app-field *ngIf="formField.controltype == 'TextBoxControl' && formField.datafieldname !== 'establishmentParcelId'"
                                 [label]="formField.name" [required]="formField.required" [errorMessage]="'This field is required.'">
                        <input class="form-control" style="width: 500px;" type="text" [formControlName]="formField.datafieldname"
                               [id]="formField.datafieldname" />
                      </app-field>

                      <!-- Integer field -->

                      <app-field *ngIf="formField.controltype == 'IntegerControl'"
                                 [label]="formField.name" [required]="formField.required" [errorMessage]="'This field is required.'">
                        <input class="form-control" style="width: 500px;" type="text" [formControlName]="formField.datafieldname"
                               [id]="formField.datafieldname" (keydown)="rejectIfNotDigitOrBackSpace($event)" />
                      </app-field>

                      <!-- show text area-->

                      <div class="padded-section" *ngIf="formField.controltype == 'TextAreaControl'">
                        <app-field [label]="formField.name" [required]="formField.required || formField.datafieldname == 'otherBusinessesDetails'" [errorMessage]="'This field is required.'" [isFullWidth]="true"
                                   [valid]="isValidOrNotTouched(formField.datafieldname)" [showChevrons]="false">
                          <textarea [readonly]="(application?.applicationType?.name === 'Temporary Delicensing'||application?.applicationType?.name === 'Temporary Patron Participation Entertainment Endorsement')&&(isOpenedByLGForApproval || lGHasApproved())"
                                    rows="8" style="width: 100%;" maxlength="5000" [formControlName]="formField.datafieldname"
                                    [id]="formField.datafieldname"></textarea>
                        </app-field>
                      </div>

                      <!-- date time controls-->
                      <app-field *ngIf="formField.controltype == 'DateTimeControl'" [label]="formField.name"
                                 [required]="formField.required" [errorMessage]="'This field is required.'">
                        <input type="text" style="background-color: #fff; width: 200px; margin-left: 15px;"
                               [formControlName]="formField.datafieldname" [id]="formField.datafieldname" placeholder="yyyy-mm-dd"
                               readonly class="form-control" [matDatepicker]="picker" (focus)="picker.open()" (click)="picker.open()">
                        <mat-datepicker #picker></mat-datepicker>
                      </app-field>

                      <!-- pick list-->
                      <div *ngIf="formField.controltype == 'PicklistControl'">
                        <app-field [label]="formField.name" [required]="formField.required" [errorMessage]="'This field is required.'" [valid]="isValidOrNotTouched(formField.datafieldname)">

                          <mat-card *ngIf="formField.controltype == 'PicklistControl'" class="mat-elevation-z0"
                                    style="margin-bottom: 10px;">
                            <section style="width: 100%;">

                              <div>
                                <mat-button-toggle-group *ngIf="formField.options.length<=3" aria-label="Font Style" [formControlName]="formField.datafieldname"
                                                         [id]="formField.datafieldname">
                                  <mat-button-toggle *ngFor="let option of formField.options" [value]="option.value">
                                    {{option.label}}
                                  </mat-button-toggle>
                                </mat-button-toggle-group>

                                <div class="auto-width" *ngIf="formField.options.length>3">
                                  <mat-form-field>
                                    <mat-select [(value)]="selected" placeholder="-- Select --" [formControlName]="formField.datafieldname" [id]="formField.datafieldname">
                                      <mat-option *ngFor="let option of formField.options" [value]="option.value">{{option.label}}</mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                              </div>
                            </section>
                          </mat-card>
                        </app-field>
                      </div>
                      <!-- lookup field-->

                      <app-field *ngIf="formField.controltype == 'LookupControl'" [label]="formField.name"
                                 [required]="formField.required" [errorMessage]="'This field is required.'">
                        Lookup Not Implemented
                      </app-field>

                      <!-- Radio Control -->
                      <app-field *ngIf="formField.controltype == 'RadioControl'"
                                 [valid]="!showValidationMessages || isValidYesNoFieldRequireTrue(formField.datafieldname)" [required]="formField.required" [errorMessage]="'This field is required.'"
                                 [showChevrons]="false">
                        <mat-checkbox [formControlName]="formField.datafieldname" [id]="formField.datafieldname">
                          <span class="error-states" *ngIf="formField.required">*</span>
                          <span class="ml-2 question-label">
                            {{formField.name}}
                          </span>
                        </mat-checkbox>
                      </app-field>

                    </section>

                  </div>
                  <hr>
                </div>
              </div>
            </div>
            <!-- Dormancy Declarations-->
            <div class="content" *ngIf="application?.applicationType?.showDeclarations && application?.applicationType?.name == ApplicationTypeNames.Dormancy">
              <h3 class="blue-header ngtest-declarations">
                DORMANCY DECLARATIONS
              </h3>
              <div class="padded-section content-bottom">
                <ng-container>
                  <section>
                    <div *ngIf=" application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization'&& application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
                      Section 57(1)(c)
                      of the
                      Liquor Control and Licensing Act
                      states: “A person commits an offence if the person (c) provides false or misleading information in the following cirucmstances
                      (i) when making an application referred to in section 12;
                      (ii) when making a report or when required and as specified by the general manager under section 59.
                    </div>
                    <div *ngIf=" ( application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization')&& application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
                      Section 22(2)
                      of the
                      Cannabis Control and Licensing Act
                      states: A licensee must not submit to the general manager an application, or information or a record included as part of the application, that
                      (a) contains false or misleading information, or
                      (b) fails to disclose a material fact.
                    </div>
                  </section>
                  <app-field [valid]="!showValidationMessages " [showChevrons]="false">
                    <mat-checkbox formControlName="affirmInformationProividedTrueAndComplete">
                      <span class="error-states">*</span>
                      <span class="ml-2">
                        Please Affirm Information Proivided True And Complete.
                      </span>
                    </mat-checkbox>
                  </app-field>
                  <app-field [valid]="!showValidationMessages" [showChevrons]="false">
                    <mat-checkbox formControlName="validInterestDormancyPeriod">
                      <span class="error-states">*</span>
                      <span class="ml-2">
                        Please Affirm it is Valid Interest Dormancy Period.
                      </span>
                    </mat-checkbox>
                  </app-field>
                  <app-field [valid]="!showValidationMessages" [showChevrons]="false">
                    <mat-checkbox formControlName="validInterestEstablishmentLocation">
                      <span class="error-states">*</span>
                      <span class="ml-2">
                        Please Affirm it is Valid Interest Establishment Location.
                      </span>
                    </mat-checkbox>
                  </app-field>
                </ng-container>
              </div>
            </div>
            <div class="content-bottom">
              <div *ngIf="application?.applicationType?.name === 'Temporary Delicensing'||application?.applicationType?.name === 'Temporary Patron Participation Entertainment Endorsement'">
                <app-field label="Start date" [required]="true"
                           errorMessage="Please enter the start date">
                  <input type="text" style="background-color: #fff; width: 200px; margin-left: 15px;"
                         formControlName="tempSuspensionOrPatronParticipationStart" id="tempSuspensionOrPatronParticipationStart" placeholder="yyyy-mm-dd"
                         [disabled]="isOpenedByLGForApproval || lGHasApproved()" class="form-control" [matDatepicker]="picker1" (focus)="picker1.open()" (click)="picker1.open()">
                </app-field>
                <mat-datepicker #picker1></mat-datepicker>

                <app-field label="End date" [required]="true"
                           errorMessage="Please enter the end date">
                  <input type="text" style="background-color: #fff; width: 200px; margin-left: 15px;"
                         formControlName="tempSuspensionOrPatronParticipationEnd" id="tempSuspensionOrPatronParticipationEnd" placeholder="yyyy-mm-dd"
                         [disabled]="isOpenedByLGForApproval || lGHasApproved()" class="form-control" [matDatepicker]="picker2" (focus)="picker2.open()" (click)="picker2.open()">
                </app-field>
                <mat-datepicker #picker2></mat-datepicker>
              </div>
            </div>
            <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.TemporaryChangetoaLiquorLicence_Other && application?.applicationType?.discretionRequest==true">
              <section>
                <div class="discretion-request">

                  <h3 class="blue-header">Discretion Request</h3>
                  <div class="content-bottom">

                    <p>
                      If your request requires an exercise of discretion:
                      upload a written submission detailing why a request for discretion should be approved and any supporting documentation.
                      All information to support your request for discretion must be submitted together in one package;
                      the branch will not consider additional materials submitted after a completed application is received.
                      Requests for discretion should be submitted at least two months prior to the proposed event.
                    </p>

                    <app-file-uploader *ngIf="applicationId" documentType="Discretion Request"
                                       fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                       [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                       entityName="application" [useDocumentTypeForName]="true"
                                       (numberOfUploadedFiles)="uploadedPhotosOrRenderingsDocuments = $event" [entityId]="applicationId"
                                       [uploadHeader]="'TO UPLOAD DISCRETION REQUEST'">
                    </app-file-uploader>

                  </div>
                </div>
              </section>
            </div>
            <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.DormancyReinstatement">
              <section>
                <div>
                  <h3 class="blue-header">Supporting Documents</h3>
                  <div class="content-bottom">
                    <p>
                      Proof of valid interest (lease or land title) is required - attach a copy when submitting the form.
                    </p>

                    <app-file-uploader *ngIf="applicationId" documentType="Supporting Document"
                                       fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                       [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                       entityName="application" [useDocumentTypeForName]="true"
                                       (numberOfUploadedFiles)="proofofValidInterestDocuments = $event" [entityId]="applicationId"
                                       [uploadHeader]="'TO UPLOAD SUPPORTING DOCUMENTS'">
                    </app-file-uploader>

                  </div>
                </div>
              </section>
            </div>
          </section>

          <!-- The label of the field will now be used to communicate the message of the alert -->
          <!-- <app-error-alert *ngIf="application?.applicationType?.name === 'Ethyl Alcohol Permit' && form.get('hasSufficientRangeOfProducts').value == 845280000">
    You can only apply for up to a maximum of 16 litres because this is an application for a “One-Time” permit.
  </app-error-alert> -->

          <section *ngIf="application?.applicationType?.showDescription1">
            <h3 class="blue-header" *ngIf="!this.isLP()">DESCRIPTION OF PROPOSED CHANGE</h3>
            <h3 class="blue-header" *ngIf="this.isLP()">ESTABLISHMENT TYPE</h3>
            <div *ngIf="this.isLP()" class="content-bottom">
              <div class="padded-section">

                <p>Identify the establishment type that best fits your proposed LP business, for example:</p>
                <table>
                  <tr>
                    <td>
                      <ul>
                        <li>Aircraft</li>
                        <li>Airport Lounge</li>
                        <li>Aquarium</li>
                        <li>Art Gallery</li>
                        <li>B&B/Hotel</li>
                        <li>Bingo Hall</li>
                        <li>Brew Pub</li>
                        <li>Casino</li>
                      </ul>
                    </td>
                    <td>
                      <ul>
                        <li>Community Centre</li>
                        <li>Concert Hall</li>
                        <li>Convention Centre</li>
                        <li>Cooking School</li>
                        <li>Cultural Centre</li>
                        <li>Fishing Lodge</li>
                        <li>Golf Course</li>
                        <li>Hair Salon</li>
                      </ul>


                    </td>
                    <td>
                      <ul>
                        <li>Live Theatre</li>
                        <li>Lounge</li>
                        <li>Military Mess</li>
                        <li>Movie Theatre</li>
                        <li>Museum</li>
                        <li>Night Club/Cabaret</li>
                        <li>Private Club</li>
                        <li>Public House (Pub)</li>
                      </ul>
                    </td>
                    <td>
                      <ul>
                        <li>Recreation Facility</li>
                        <li>Rental Hall</li>
                        <li>Resort</li>
                        <li>Retail Store</li>
                        <li>Spa</li>
                        <li>Stadium</li>
                        <li>Train Station</li>
                        <li>University/College</li>
                      </ul>

                    </td>
                  </tr>
                </table>

                <p>Note: The type of establishment may affect licensing conditions, such as [whether or not minors are permitted (Family Food Service)] or when liquor may be served. Refer to Liquor Primary section in the ( <a href="https://www2.gov.bc.ca/gov/content/employment-business/business/liquor-regulation-licensing/liquor-licence-permits/liquor-law-policy/liquor-licence-terms-conditions-manuals" target="_blank"> Liquor Policy Manual</a>) for more information.</p>

                <app-field label="Establishment Type" [required]="true" [isFullWidth]="true"
                           [showChevrons]="false" [valid]="isValidOrNotTouched('description1')"
                           errorMessage="Please enter a description">
                  <input formControlName="description1" style="width: 100%;" maxlength="80"
                         minlength="3" id="description1">
                </app-field>
              </div>
            </div>

            <div *ngIf="application?.applicationType?.name != 'Picnic Area Endorsement' && !this.isLP()">
              <div class="padded-section">
                <app-field label="Please briefly outline the proposed change, including the general construction proposal and time frames for construction:" [required]="true" [isFullWidth]="true"
                           [showChevrons]="false" [valid]="isValidOrNotTouched('description1')"
                           errorMessage="Please enter a description">
                  <textarea formControlName="description1" rows="8" style="width: 100%;" maxlength="5000"
                            minlength="10" id="description1"></textarea>
                </app-field>
              </div>
            </div>
            <div *ngIf="application?.applicationType?.name === 'Picnic Area Endorsement'">
              <div class="padded-section">
                <app-field label="Describe proposed change(s) such as moving, adding or changing approved picnic area(s). Including any increase in capacity."
                           [required]="true" [isFullWidth]="true" [showChevrons]="false"
                           [valid]="isValidOrNotTouched('description1')" errorMessage="Please enter a description ">
                  <textarea formControlName="description1" rows="8" style="width: 100%;" maxlength="5000"
                            minlength="10" id="description1"></textarea>
                </app-field>
              </div>
            </div>
          </section>

          <!-- Cooler access -->
          <ng-container *ngIf="application?.applicationType?.publicCooler =='Yes'">
            <app-field label="Is the public permitted to walk into the cooler space?" [required]="false"
                       errorMessage="This field is required." [valid]="isValidOrNotTouched('hasCoolerAccess')">
              <mat-card class="mat-elevation-z0" style="margin-bottom: 10px;">
                <section style="width: 100%;">
                  <div>
                    <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('hasCoolerAccess')}"
                                             formControlName="hasCoolerAccess" aria-label="Font Style">
                      <mat-button-toggle [value]="true">Yes</mat-button-toggle>
                      <mat-button-toggle [value]="false">No</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </section>
              </mat-card>
            </app-field>
          </ng-container>

          <!-- Photos or Renderings of Signage-->
          <div class="ngtest-photo-signage" *ngIf="showFormControl(application?.applicationType?.signage)">
            <hr>
            <label for="">Photos or renderings of the establishment's signage</label>
            <br>
            <section *ngIf="application?.applicationType?.signage === FormControlState.Show">

              <div *ngIf="htmlContent.signage">
                <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.signage"></section>
                <img src="assets/sample-signage.png" style="width: 700px;" alt="Sample Signage" *ngIf="application?.licenseType == 'Food Primary' || application?.licenseType == 'Liquor Primary'">
              </div>

              <div *ngIf="!htmlContent.signage">
                <p>
                  The signage submitted must show the name of the establishment and all words, images and symbols used in the
                  signage.
                </p>

                <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.LiquorLicenceTransfer">
                  <p>
                    If the name of the establishment is changing, you must provide a drawing or a photo of your proposed establishment
                    sign. Your name and signage must be approved by the Branch to ensure it is appropriate, accurately reflecting the
                    nature of the business. Do not order signs until you have received this approval.
                  </p>

                  <img src="assets/sample-signage.png" style="width: 700px;" alt="Sample Signage">
                </section>


                <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                  Signage must not contain any pictures, images or symbols that imply the sale of medical cannabis
                  (e.g. a
                  green cross). It must not imply an association with another business (other than another non-medical
                  cannabis
                  retail store).
                </p>
                <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
                  <b>Note:</b> If submitting renderings, renderings may be either printed or hand-drawn (as long as
                  they are
                  legible)
                </p>
              </div>

              <img *ngIf="application?.applicationType?.name === 'Temporary Use Area Endorsement'" src="assets/tua-site-plan-example.png" style="width: 700px;" alt="Sample Signage">

              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Signage"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                   entityName="application" [useDocumentTypeForName]="true"
                                   (numberOfUploadedFiles)="uploadedSignageDocuments = $event" [entityId]="applicationId"
                                   [uploadHeader]="'TO UPLOAD SIGNAGE DOCUMENTS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>

            </section>
          </div>
          <mat-card *ngIf="showExteriorChangeQuestion()" class="mat-elevation-z0" style="margin-bottom: 10px;">
            <section style="display: flex; justify-content: space-between; width: 100%;">
              <div class="question-label">
                Will the store’s exterior change?
              </div>
              <div style="flex: 0 0 85px;">
                <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('proposedChange')}"
                                         formControlName="proposedChange" aria-label="Font Style">
                  <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                  <mat-button-toggle value="No">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </section>
            <div class="ngtest-site-plan" *ngIf="showExteriorRenderings()">
              <hr><br>
              <label for="">Exterior Renderings</label>
              <p>Upload renderings of the planned changes to the store's exterior:</p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Exterior Renderings"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                   entityName="application" [useDocumentTypeForName]="true"
                                   (numberOfUploadedFiles)="uploadedPhotosOrRenderingsDocuments = $event" [entityId]="applicationId"
                                   [uploadHeader]="'TO UPLOAD EXTERIOR RENDERINGS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>
            </div>

          </mat-card>


          <!-- Floor Plan-->
          <section *ngIf="showFormControl(application?.applicationType?.floorPlan)">
            <div class="ngtest-floor-plan" [formGroup]="form">
              <hr><br>
              <label for="">Floor Plan</label>
              <br>
              <section>

                <!-- if there is configured floor plan text, show it-->
                <div *ngIf="htmlContent.floorPlan">
                  <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.floorPlan"></section>
                  <img *ngIf="application?.licenseType == 'Food Primary' && application?.applicationType.name != 'Temporary Extension of Licensed Area'" src="assets/Food-Primary-floor-plan-sample.png" style="width: 700px;" alt="Sample Floor Plan">
                  <img *ngIf="this.showMFGImages()" src="assets/MFG-FLOOR.png">

                </div>

                <!-- otherwise switch to legacy mode-->
                <div *ngIf="!htmlContent.floorPlan">
                  <div *ngIf="application?.licenseType == 'Cannabis Retail Store' || application?.licenseType == 'S119 CRS Authorization' || application?.licenseType == 'Producer Retail Store'">
                    <span>
                      A floor plan is a document, showing a view from above, of the dimensions and relationships
                      between
                      rooms, spaces and other physical features on each floor of a structure. The document must
                      measure at
                      least 8.5" x 11" (standard letter size). A floor plan for each level of the establishment must
                      be
                      submitted if the proposed establishment has more than one level. Either a hand-drawn or
                      computer-generated plan is acceptable, as long as the plan is drawn to scale and is clear and
                      legible. A
                      floor plan must not be submitted on graph paper or paper with gridlines.
                    </span>
                    <div style="display: flex; margin-top: 10px;">
                      <section>
                        The floor plan must be submitted at the time of application and
                        must identify the proposed cannabis retail area(s) plus
                        the following interior features of the establishment:
                        <ul>
                          <li>Each room or area labeled with its intended use and dimensions.</li>
                          <li>Washrooms, stairs and elevators.</li>
                          <li>Entrances and exits (including those used by staff only).</li>
                          <li>Cannabis storage areas.</li>
                          <li>Sales counter and cash register locations.</li>
                          <li>Furniture and fixture layout (e.g. shelves, display cases).</li>
                          <li>
                            Identify the security system and other physical security features that secure the store.
                          </li>
                        </ul>
                        <p>
                          <strong>Please confirm:</strong>
                        </p>
                        <mat-checkbox formControlName="IsReadyProductNotVisibleOutside">
                          No cannabis products, accessories, packages or labelling will be visible from outside the
                          retail store
                        </mat-checkbox>
                      </section>
                      <img src="assets/floor-plan-example.png" width="300" alt="Floor plan"
                           style="display: block; margin: auto;">
                    </div>

                  </div>
                  <div *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization'  && application?.licenseType != 'Producer Retail Store'">
                    <p>The floor plans of the proposed establishment, which must meet the following requirements: </p>
                    <ul>
                      <li>Must be scaled, clear, legible and include room dimensions (8.5" x 11") </li>
                      <li *ngIf="isRAS()">
                        detail the entire premises in which the business is located, including the
                        area
                        where liquor will be located, entrances, exits, washrooms, storage areas, cash register area,
                        coolers,
                        any adjoining doors and other fixtures
                      </li>
                      <li *ngIf="isRAS()">clearly identify any adjoining areas</li>
                      <li *ngIf="!isRAS()">
                        Detail entrance, exit, washrooms, storage area, cash register area, coolers, any adjoining
                        doors
                        and
                        other fixtures
                      </li>
                      <li *ngIf="!isRAS()">
                        Clearly identify the area proposed for licensing and any adjoining
                        unlicensed
                        areas
                      </li>
                    </ul>
                  </div>
                </div>

              </section>
              <p *ngIf="application?.applicationType?.floorPlan === FormControlState.ReadOnly">
                The below floor plan is on file.
              </p>
              <section>
                <app-file-uploader *ngIf="application?.id" documentType="Floor Plan"
                                   fileTypes="FILE MUST BE IN PDF FORMAT."
                                   [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                   entityName="application" [useDocumentTypeForName]="true"
                                   (numberOfUploadedFiles)="uploadedFloorPlanDocuments = $event" [entityId]="application?.id"
                                   [uploadHeader]="'TO UPLOAD FLOOR PLANS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>
            </div>
          </section>

          <!-- Service Area -->
          <h3 class="blue-header" *ngIf="application.applicationType.serviceAreas">SERVICE AREAS</h3>
          <section *ngIf="application.applicationType.serviceAreas" class="padded-section content-bottom">

            <div *ngIf="htmlContent?.serviceAreas" [innerHTML]="htmlContent.serviceAreas"></div>

            <app-field [valid]="!showValidationMessages || form.get('serviceAreas').valid" errorMessage="All fields are required."
                       [showChevrons]="false" [isFullWidth]="true">
              <app-capacity-table formControlName="serviceAreas" [areaCategory]="getAreaCategoryNumber('Service')"
                                  [enabled]="!isOpenedByLGForApproval && !lGHasApproved()">
              </app-capacity-table>
            </app-field>

            <mat-card class="mat-elevation-z0 mb-3" *ngIf="showHoldsOtherManufactureLicence()">
              <section style="display: flex; justify-content: space-between; width: 100%;">
                <div class="question-label">
                  Do you currently hold another manufacturer licence at the same site that is already endorsed for the same area?
                </div>
                <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('holdsOtherManufactureLicence1')}"
                                           formControlName="holdsOtherManufactureLicence1" aria-label="Font Style">
                    <mat-button-toggle [value]="true">Yes</mat-button-toggle>
                    <mat-button-toggle [value]="false">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>

              </section>
              <div class="question-label">
                <app-error-alert *ngIf="isOpenedByLGForApproval && this.form.get('holdsOtherManufactureLicence1')">
                  If this applicant has answered YES to this question please contact LCRB (via email: <a href="mailto:LCRB.SLA@gov.bc.ca">LCRB.SLA@gov.bc.ca</a>)  prior to
                  starting your related processes (i.e. for conducting public input and providing comment) to confirm whether these steps are required for this application.
                  When an applicant proposes to have overlapping service areas it is often not necessary to conduct further public input or provide comment
                </app-error-alert>
              </div>
            </mat-card>

          </section>

          <!-- Outside Area -->
          <h3 class="blue-header" *ngIf="application.applicationType.outsideAreas">OUTSIDE AREAS</h3>
          <section *ngIf="application.applicationType.outsideAreas" class="padded-section content-bottom">
            <div *ngIf="htmlContent?.outdoorAreas" [innerHTML]="htmlContent.outdoorAreas"></div>
            <app-field [valid]="!showValidationMessages || form.get('outsideAreas').valid"
                       errorMessage="All fields are required." [showChevrons]="false" [isFullWidth]="true">
              <app-capacity-table formControlName="outsideAreas"
                                  [areaCategory]="getAreaCategoryNumber('OutsideArea')"
                                  [enabled]="!isOpenedByLGForApproval && !lGHasApproved()">
              </app-capacity-table>
            </app-field>

            <mat-card class="mat-elevation-z0 mb-3" *ngIf="showHoldsOtherManufactureLicence()">
              <section style="display: flex; justify-content: space-between; width: 100%;">
                <div class="question-label">
                  Do you currently hold another manufacturer licence at the same site that is already endorsed for the same area?
                </div>
                <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('holdsOtherManufactureLicence2')}"
                                           formControlName="holdsOtherManufactureLicence2" aria-label="Font Style">
                    <mat-button-toggle [value]="true">Yes</mat-button-toggle>
                    <mat-button-toggle [value]="false">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
              </section>
            </mat-card>
            <div class="question-label">
              <app-error-alert *ngIf="isOpenedByLGForApproval && this.form.get('holdsOtherManufactureLicence2')">
                If this applicant has answered YES to this question please contact LCRB (via email: <a href="mailto:LCRB.SLA@gov.bc.ca">LCRB.SLA@gov.bc.ca</a>)  prior to
                starting your related processes (i.e. for conducting public input and providing comment) to confirm whether these steps are required for this application.
                When an applicant proposes to have overlapping service areas it is often not necessary to conduct further public input or provide comment
              </app-error-alert>
            </div>
          </section>

          <!-- Capacity Area -->
          <h3 class="blue-header" *ngIf="application.applicationType.capacityArea
             && application?.applicationType?.name != ApplicationTypeNames.TemporaryExtensionOfLicensedAreaLP">
            CAPACITY AREA
          </h3>
          <section *ngIf="application.applicationType.capacityArea && application?.applicationType?.name != ApplicationTypeNames.TemporaryExtensionOfLicensedAreaLP" class="padded-section content-bottom" formGroupName="capacityArea">
            <div *ngIf="htmlContent?.capacityArea" [innerHTML]="htmlContent.capacityArea"></div>
            <app-field label="Capacity" [required]="true" [valid]="!showValidationMessages || form.get('capacityArea.capacity').valid"
                       errorMessage="Capacity is required." [showChevrons]="false" [isFullWidth]="false">
              <input class="form-control" formControlName="capacity" id="capacity" placeholder="Enter Capacity" mask="0*" [readonly]="isOpenedByLGForApproval || lGHasApproved()" />
            </app-field>
          </section>

          <!--  Proposed Change Description for Structural-->

          <br>
          <hr *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange">
          <mat-card *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange"
                    class="mat-elevation-z0" style="margin-bottom: 10px;">
            <section style="display: flex; justify-content: space-between; width: 100%;">
              <div class="question-label">
                Does the proposed change involve a shared vestibule or changes to the entrances, exits or windows?
              </div>
              <div style="flex: 0 0 85px;">
                <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('proposedChange')}"
                                         formControlName="proposedChange" aria-label="Font Style">
                  <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                  <mat-button-toggle value="No">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </section>
          </mat-card>


          <div class="ngtest-site-plan" *ngIf="showSitePlan()">
            <hr><br>
            <label for="">Site Plan</label>
            <br>

            <!-- show the configured content if there is some-->
            <section *ngIf="htmlContent?.sitePlan">
              <div class="ngtest-before-SitePlan-content" [innerHTML]="htmlContent.sitePlan"></div>
            </section>
            <!--  otherwise should a standard-ish block-->
            <section *ngIf="!htmlContent?.sitePlan">
              <p>A scaled site plan must show the following: </p>
              <ul>
                <li>location of the front entrance door of the proposed establishment</li>
                <li>
                  any other buildings/businesses around the proposed establishment and the entrances to those
                  buildings
                </li>
                <li>any relevant street names</li>
                <li *ngIf="application?.licenseType == 'Producer Retail Store'">that the store does not occupy any part of the federal area. For example, areas where activities under the federal licence take place.</li>
              </ul>
            </section>

            <!-- Cannabis Retail Store has an additional image-->
            <div *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
              <img src="assets/site-plan-example.png" width="350" alt="Site plan"
                   style="display: block; margin: auto;">
              <p>
                If the proposed store is located inside a building with other businesses (e.g. a mall), submit two
                site plans:
              </p>
              <p>1) One site plan showing location of any other buildings/businesses on the same site, including:</p>
              <ul>
                <li>Each building footprint, building name and a list of businesses operating inside the building</li>
                <li>Road access and exits, including any relevant street names, and</li>
                <li>Parking lots</li>
              </ul>
              <p>2) A second site plan showing the location of the proposed store inside the building’s footprint:</p>
              <ul>
                <li>All entrances and exits for the building</li>
                <li>The location, name and type of businesses operating inside the building</li>
                <li>The store footprint with all entrances and exits for the store, and</li>
                <li>
                  A description of the type of separation proposed for any business adjoining the proposed store
                </li>
              </ul>
              <p>
                Full height walls are required for separation and no connecting doors between the cannabis store and the neighbouring business are permitted.
              </p>
              <p>
                The cannabis store may share a vestibule with another type of business (e.g. a liquor store
                or grocery store) provided each business has its own controlled entrance within the vestibule. The
                cannabis
                store cannot share a vestibule with a business that would be contrary to public interest (i.e.
                business
                aimed at minors or a liquor consumption business).
              </p>
            </div>

            <img *ngIf="application?.applicationType?.name === 'Temporary Use Area Endorsement'" src="assets/sample-signage.png" style="width: 700px;" alt="Sample Signage">
            <img *ngIf="this.showMFGImages()" src="assets/MFG-SITE.png" alt="Sample Site Plan">

            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Site Plan"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                 [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                 entityName="application" [useDocumentTypeForName]="true"
                                 (numberOfUploadedFiles)="uploadedSitePlanDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD SITE PLAN DOCUMENTS, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>
            <section *ngIf="application?.licenseType === 'Manufacturer'">
              For Distillers Only: The Office of the Fire Commissioner (OFC) requires that a distillery be constructed and maintained in conformance with the BC Fire Code. The OFC will be provided a copy of the Approval in Principal for your application, if issued.
            </section>
          </div>

          <div *ngIf="showSitePhotos()">

            <hr><br>
            <div [ngSwitch]="application?.applicationType?.name">
              <label for="" *ngSwitchCase="'RLRS Relocation'">Photos</label>
              <label for="" *ngSwitchCase="'Rural Licensee Retail Store'">Photos</label>
              <label for="" *ngSwitchDefault>Exterior Photos</label>
            </div>
            <section *ngIf="htmlContent?.sitePhotos" class="padded-section">
              <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.sitePhotos"></div>
            </section>

            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Site Photos"
                                 fileTypes="FILE MUST BE IN PDF, JPG, JPEG OR PNG FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                 [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="true"
                                 entityName="application" [useDocumentTypeForName]="true" [extensions]="['pdf', 'jpg', 'jpeg', 'png']"
                                 (numberOfUploadedFiles)="uploadedSitePhotos = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD SITE PHOTOS DOCUMENTS, DRAG FILES HERE OR'">
              </app-file-uploader>
            </section>
          </div>

          <!--div *ngIf="application?.licenseType != 'Cannabis Retail Store'">
  <p>
    <u>
      Provide a minimum four (4) colour photographs of the proposed site, one facing each side of the
      building/property
    </u>
  </p>
  <p>
    These photos need to be current (taken by the licensee or representative within the past 90 days).
    Pictures from internet sites will not be accepted.
  </p>
  </div-->

          <h3 class="blue-header" *ngIf="showGroceryQuestion()">Grocery Declaration</h3>
          <div class="ngtest-grocery-store" *ngIf="showGroceryQuestion()" class="content-bottom">

            <mat-card class="mat-elevation-z0" style="margin-bottom: 10px;">
              <section style="display: flex; justify-content: space-between; width: 100%;">
                <!--div class="question-label" *ngIf="!htmlContent.Grocery">
        Will the proposed structural alteration involve removing a wall between the
        {{application?.licenseType}}
        and an eligible grocery store?
        </div-->
                be
                cl
                <div class="question-label" *ngIf="!htmlContent.grocery">
                  Is the proposed location inside a grocery store?
                </div>
                <div class="question-label" *ngIf="htmlContent.grocery" [innerHTML]="htmlContent.grocery"></div>


                <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('isLocatedInGroceryStore')}"
                                           formControlName="isLocatedInGroceryStore" aria-label="Font Style">
                    <mat-button-toggle [value]="true">Yes</mat-button-toggle>
                    <mat-button-toggle [value]="false">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
              </section>
            </mat-card>
            <div *ngIf="showGroceryStore()">
              <section>
                <p>
                  Please download and print the
                  <a href="https://www2.gov.bc.ca/assets/gov/employment-business-and-economic-development/business-management/liquor-regulation-licensing/forms/lcrb090_grocery_store_declaration.pdf">
                    f"
                    Gro
                    cery
                    Store Declaration
                  </a> and have it be completed by
                  the owner of an eligible grocery store.
                </p>
                <p>An eligible grocery store is defined as:</p>
                <ul>
                  <li>
                    primarily engaged in retailing a general line of foods, including canned, dry and frozen food,
                    fresh
                    fruits and vegetables, fresh and prepared meats, fish and poultry, dairy products, baked products
                    and
                    snack foods, and non-liquor beverages, intended for human consumption, and
                  </li>
                  <li>having an area of at least 10,000 square feet, including storage.</li>
                </ul>
                <p>
                  To maintain eligibility, the conditions above must continue to be met, and the sales revenue from
                  food
                  and non-liquor liquor beverages must:
                </p>
                <ul>
                  <li>total at least 70% of the total sales revenue of non-liquor products, and </li>
                  <li>
                    total more than 50% of the total sales revenue of liquor and non-liquor products in the grocery
                    store.
                  </li>
                </ul>

              </section>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Grocery Declaration"
                                   [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
                                   [useDocumentTypeForName]="true" (numberOfUploadedFiles)="uploadedGroceryDocuments = $event"
                                   [entityId]="applicationId" [uploadHeader]="'TO UPLOAD GROCERY DECLARATION, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>

            </div>

          </div>

          <!-- Hours of Sale -->
          <section class="ngtest-hours-of-sale" *ngIf="application?.applicationType?.showHoursOfSale">
            <h3 class="blue-header">HOURS OF SALE</h3>
            <div class="padded-section content-bottom">
              <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.FP || application?.applicationType?.name === ApplicationTypeNames.FPRelo">
                The standard service hours for a Food Primary are between 9:00AM and midnight. You may extend these hours by
                submitting an Extend Hours of Service Beyond Standard Service Hours application from the application dashboard after
                you submit your Food Primary application. LG/IN approval is required.
              </p>
              <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.FP && application?.applicationType?.name !== ApplicationTypeNames.FPRelo">
                Indicate the
                proposed hours of sales below.
              </p>
              <table class="store-hours">
                <tr>
                  <th class="lead"></th>
                  <th>Sunday</th>
                  <th>Monday</th>
                  <th>Tuesday</th>
                  <th>Wednesday</th>
                  <th>Thursday</th>
                  <th>Friday</th>
                  <th>Saturday</th>
                </tr>
                <tr>
                  <th>Open</th>
                  <td>
                    <select class="form-control" formControlName="serviceHoursSundayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursMondayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursTuesdayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursWednesdayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursThursdayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursFridayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursSaturdayOpen">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <th>Close</th>
                  <td>
                    <select class="form-control" formControlName="serviceHoursSundayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursMondayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursTuesdayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursWednesdayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursThursdayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursFridayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                  <td>
                    <select class="form-control" formControlName="serviceHoursSaturdayClose">
                      <option value=""> -- </option>
                      <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                    </select>
                  </td>
                </tr>
              </table>
              <p class="error-states" *ngIf="showValidationMessages && !isHoursOfSaleValid()">
                Hours of Sale are required
              </p>
            </div>
          </section>

          <!-- Licensed Producer -->
          <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
            <h3 class="blue-header">INFORMATION ABOUT THE LICENSED PRODUCER</h3>
            <section class="padded-section">
              <p>
                Which federally licensed producer(s) will the applicant represent in B.C.?
              </p>
              <app-field label="Name of Federal Producer " [required]="true" [valid]="true"
                         errorMessage="Please enter the name of federal producer">
                <input class="form-control" formControlName="federalProducerNames" id="federalProducerNames"
                       style="width: 350px;" type="text">
              </app-field>
            </section>
          </div>


          <!-- Connections to non-medical -->
          <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
            <h3 class="blue-header">CONNECTIONS TO NON-MEDICAL CANNABIS RETAIL STORE LICENSEES OR APPLICANTS</h3>
            <div class="content-bottom" *ngIf="application?.tiedHouse && account?.businessType">
              <app-connection-to-non-medical-stores *ngIf="application?.tiedHouse"
                                                    [tiedHouse]="application?.tiedHouse"
                                                    licensedProducerText="B.C. non-medical cannabis retail store licensee or applicant"
                                                    federalProducerText="licensee or applicant" [businessType]="account?.businessType"
                                                    (value)="tiedHouseFormData = $event">
              </app-connection-to-non-medical-stores>
            </div>
          </section>

          <div class="ngtest-associate-upload" *ngIf="application?.applicationType?.showAssociatesFormUpload">
            <br>
            <hr>
            <label for="">Associates Form</label>
            <br>
            <i>
              Please download
              <a *ngIf="account?.businessType === 'SoleProprietorship'"
                 href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf="account?.businessType === 'IndigenousNation'"
                 href="https://www2.gov.bc.ca/assets/download/B98C3F6F56204AACB715C71D59249A3C" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                 href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                 href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                 href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a>
              &nbsp;the Associate Form.
            </i>
            <p>Upload the completed form below.</p>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
                                 [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                 [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()"
                                 fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
                                 (numberOfUploadedFiles)="uploadedAssociateDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD ASSOCIATE FORM, DRAG FILE HERE OR'" #mainForm>
              </app-file-uploader>
            </section>
            <br>
          </div>

          <div class="ngtest-financial-integrity-upload"
               *ngIf="application?.applicationType?.showFinancialIntegrityFormUpload">
            <hr><br>
            <label for="">Business Financial Integrity Form</label>
            <i>
              Please download and complete the
              <a href="https://www2.gov.bc.ca/assets/download/E840994D9D304AFE8D56A50666281B9D"
                 download target="_blank" rel="noopener noreferrer">
                financial integrity form
              </a>.
            </i>
            <p>Upload the completed form below.</p>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Licence Application Financial Integrity"
                                 [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()"
                                 [disableUploads]="isOpenedByLGForApproval || lGHasApproved()" fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [multipleFiles]="false" entityName="application"
                                 (numberOfUploadedFiles)="uploadedFinancialIntegrityDocuments = $event" [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY FORM, DRAG FILE HERE OR'" #financialIntegrityDocuments>
              </app-file-uploader>
            </section>
          </div>

          <div class="ngtest-ethyl-documents-upload"
               *ngIf="application?.applicationType?.name === 'Ethyl Alcohol Permit'">
            <!-- <hr><br> -->
            <label for="">Ethyl Alcohol Permit Documents</label>
            <br>
            <p>Please upload documents below.</p>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Ethyl Alcohol Permit Documents"
                                 [enableFileDeletion]="true"
                                 [disableUploads]="false" fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [multipleFiles]="true" entityName="application"
                                 [entityId]="applicationId"
                                 [uploadHeader]="'TO UPLOAD DOCUMENTS, DRAG FILE HERE OR'" #EthyAlcohoPermitDocuments>
              </app-file-uploader>
            </section>
          </div>

          <section class="ngtest-supporting-documents"
                   *ngIf="application?.applicationType?.showSupportingDocuments &&  (application?.applicationType?.name !== ApplicationTypeNames.Marketer || account?.businessType !== 'SoleProprietor')">
            <hr>
            <br>
            <label for="">Supporting Documents</label>
            <br>
            <p *ngIf="application?.applicationType?.name == 'Temporary Use Area Endorsement'">Please download, print and have signed the <a href="https://www2.gov.bc.ca/assets/download/C96F6309C0864AC2A7F368480BE35A61" target="_blank">Property Ownership Acknowledgement and Declaration Statements</a> form.</p>

            <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer && application?.applicationType?.name !== 'Temporary Use Area Endorsement'">
              Please download the
              <span *ngIf=" application?.applicationType?.name !== ApplicationTypeNames.CRSTransferofOwnership">
                <a *ngIf="account?.businessType === 'SoleProprietorship'"
                   href="https://www2.gov.bc.ca/assets/download/EEC8AD886FA04CD48D78FD22A375A7D8" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="account?.businessType === 'Society'"
                   href="https://www2.gov.bc.ca/assets/download/8FFCF0DA701842F99D4A80F05174A71A" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="account?.businessType === 'IndigenousNation'"
                   href="https://www2.gov.bc.ca/assets/download/87A1FB955AD64660BAC4BF2462226E67" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="businessTypeIsPartnership()"
                   href="https://www2.gov.bc.ca/assets/download/13ADA5B32E4242568DB2B72E3566A56D" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf=" businessTypeIsPrivateCorporation()"
                   href="https://www2.gov.bc.ca/assets/download/9D237C8721B1475FB95534037AE21829" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
              </span>
              <span *ngIf=" application?.applicationType?.name === ApplicationTypeNames.CRSTransferofOwnership">
                <a *ngIf="account?.businessType === 'SoleProprietorship'"
                   href="https://www2.gov.bc.ca/assets/download/300E2E17AA3F4EFE9B555F86B065BE9E" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="account?.businessType === 'Society'"
                   href="https://www2.gov.bc.ca/assets/download/9CC0BA56735E466AB09FEAEE3241F46C" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="account?.businessType === 'IndigenousNation'"
                   href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf="businessTypeIsPartnership()"
                   href="https://www2.gov.bc.ca/assets/download/9A8C9C2E49564C54A2232E60F5B266DB" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
                <a *ngIf=" businessTypeIsPrivateCorporation()"
                   href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download
                   target="_blank" rel="noopener noreferrer">
                  Document Checklist
                </a>
              </span>
              <span *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">
                and assemble
                all
                required documents.
              </span>
              <span *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSLocationChange">
                and assemble
                all
                required documents listed in the 'Documents
                Related to the Proposed Store' section.
              </span>
            </p>
            <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
              <p *ngIf="account?.businessType === 'Society'">
                Please upload the society’s Statement of Directors and Registered Office.
              </p>
              <!-- <p *ngIf="account?.businessType === 'PublicCorporation'">
        Please upload the society’s Statement of Directors and Registered Office.
      </p> -->
              <p *ngIf="businessTypeIsPartnership()">
                Please upload the Partnership Agreement.
              </p>
              <div *ngIf="businessTypeIsPrivateCorporation()">
                <p>Please upload: </p>
                <ul>
                  <li>Notice of Articles</li>
                  <li>Central Securities Register</li>
                </ul>
              </div>

            </section>

            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Licence Application Supporting"
                                 [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                 [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()"
                                 (numberOfUploadedFiles)="uploadedSupportingDocuments = $event" [maxNumberOfFiles]="200"
                                 fileTypes="FILES MUST BE IN PDF, JPEG, OR PNG FORMAT." entityName="application"
                                 [entityId]="applicationId" [extensions]="['pdf', 'jpg', 'jpeg', 'png']" #supportingDocuments>
              </app-file-uploader>
            </section>
            <br>
          </section>


          <!-- RAS Details -->
          <section *ngIf="application?.applicationType.showOwnershipDeclaration">
            <h3 class="blue-header">{{this.application?.licenseType}} Ownership Details</h3>
            <div class="content-bottom">
              <section *ngIf="application?.applicationType.showOwnershipDeclaration">
                <p>Please provide the following details about your application:</p>

                <!-- RAS Certificate Number -->
                <app-field label="Rural Agency Store Certificate Number:" errorMessage="Please enter a certificate number"
                           *ngIf="this.application?.licenseType === 'Rural Agency Store'">
                  <input type="text" class="form-control" style="width: 200px;" id="certNumber"
                         formControlName="description1" mask="0009">
                </app-field>

                <section>
                  <div>
                    <mat-checkbox formControlName="isOwnerBusiness">
                      The applicant is the owner of the business in respect of which the licence is to be issued or will become the owner before the licence is issued.
                    </mat-checkbox>
                  </div>
                  <div>
                    <mat-checkbox formControlName="hasValidInterest">
                      At the time of this submission, the applicant is:
                      <ul>
                        <li>
                          The owner of or has an agreement to purchase the place or premises that will form the
                          proposed
                          establishment, or
                        </li>
                        <li>
                          The lessee or has a binding offer to lease the place or premises that will form the proposed
                          establishment
                        </li>
                      </ul>
                    </mat-checkbox>
                  </div>
                  <div>
                    <mat-checkbox formControlName="willHaveValidInterest">
                      At the time the licence is issued, the applicant will be:
                      <ul>
                        <li>The owner of the place or premises that forms the establishment, or</li>
                        <li>
                          The lessee of the place or premises that forms the establishment (term no less than 12
                          months).
                        </li>
                      </ul>
                    </mat-checkbox>
                  </div>
                </section>

              </section>
              <section *ngIf="isRelocation()">
                <b>Note:</b> Valid interest must be maintained at the current and proposed site until the relocation is finalized. LCRB may request a copy of valid interest at the current site during the relocation application process.
              </section>
            </div>
          </section>

          <!-- Tied House Exemption -->
          <section *ngIf="application?.licenseType === 'Manufacturer' && application?.applicationType?.name != ApplicationTypeNames.Dormancy
                   && application?.applicationType?.name != ApplicationTypeNames.ChangetoApprovedPicnicArea && application?.applicationType?.name != ApplicationTypeNames.PicnicAreaEndorsement">
            <h3 class="blue-header">{{this.application?.licenseType}} Tied House Exemption</h3>
            <div class="content-bottom">
              <section>
                <div>
                  <mat-checkbox formControlName="willHaveTiedHouseExemption">
                    The application will tied house exemption.
                  </mat-checkbox>
                </div>
              </section>
            </div>
          </section>

          <section class="ngtest-valid-interest" *ngIf="showFormControl(application?.applicationType?.validInterest) || showValidInterestforTransfer()">
            <hr><br>
            <label for="" *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization'">
              Offer or Proof of Ownership, Lease or Sub-Lease
            </label>
            <label for="" *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization'">Proof of Valid Interest</label>
            <section>
              <div *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization' || application?.licenseType == 'Producer Retail Store'">
                <p>
                  If the applicant currently owns or leases the proposed store location, submit <b>Option 1</b>. If
                  the
                  applicant doesn't currently own or lease the proposed store location, submit <b>Option 2</b>.
                </p>
                <p>
                  Leases or other arrangements must not expire for at least 12 months from the date the licence or authorization is
                  issued.
                  Option 1 will be required before the licence or authorization is issued.
                </p>
                <p>
                  <b>Option 1</b>: Submit a copy of the lease, sub-lease, or proof of ownership of the proposed store
                  location.
                </p>
                <p>
                  <b>Option 2</b>: Submit a copy of the offer to purchase, lease, or sub-lease the proposed store
                  location.
                  Note,
                </p>

              </div>
              <div *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization'&& application?.licenseType != 'Producer Retail Store'">
                <p>Any one of the following documents can be used to show valid interest in the property:</p>
                <ul>
                  <li>
                    Certificate of Title in the licensee's name (as stated on the
                    <span *ngIf="isLiquor()">liquor</span>
                    <span *ngIf="!isLiquor()">cannabis</span>
                    licence).
                  </li>
                  <li>
                    A fully executed lease, an assignment or an offer of lease, which does not expire for at least 12
                    months. The tenant on the lease document must be the licensee (name the <span *ngIf="isLiquor()">liquor</span>
                    <span *ngIf="!isLiquor()">cannabis</span> licence is issued to).
                    The lease or offer to lease must show rent paid, have a term and an expiry date, and be signed by
                    the
                    licensee and the landlord or property owner.
                  </li>
                  <li>
                    An offer or option to purchase the property and buildings in the licensee's name (as provided to
                    LCRB
                    ). An offer or option must show price paid, have a term and expiry date and be signed by
                    both the licensee and property owner. If an operated store is relocating, the valid interest must
                    be in the name of the third party operator.
                  </li>
                </ul>
                <p>&nbsp;</p>
              </div>
              <p *ngIf="!isRAS() && isRelocation()">
                <strong>Note:</strong> Valid interest must be maintained at the current and proposed site until the
                relocation is finalized. LCRB may request a copy of valid interest at the current site during the
                relocation application process.
              </p>

              <p *ngIf="application?.applicationType?.validInterest === FormControlState.ReadOnly">
                The below offer or proof of ownership, lease or sub-lease is on file.
              </p>
              <section>
                <app-file-uploader *ngIf="applicationId" documentType="Valid Interest"
                                   fileTypes="FILE MUST BE IN PDF FORMAT." [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                                   [enableFileDeletion]="!isOpenedByLGForApproval && !lGHasApproved()" [multipleFiles]="false"
                                   entityName="application" [useDocumentTypeForName]="true"
                                   (numberOfUploadedFiles)="uploadedValidInterestDocuments = $event" [entityId]="applicationId"
                                   [uploadHeader]="'TO UPLOAD OWNERSHIP OR LEASE DOCUMENTS, DRAG FILES HERE OR'">
                </app-file-uploader>
              </section>


            </section>
          </section>
          <section *ngIf="application?.applicationType?.name === 'Manufacturer Location Change'">
            <!-- Contact Details -->
            <h3 class="blue-header">MANUFACTURER SUPPORTING INFORMATION</h3>
            <div class="content-bottom">
              <mat-checkbox formControlName="relocateWinaryLicence" (change)="relocateWinaryLicenceChanged()">
                <section>
                  <span>
                    Is the purpose of this manufacturer location change application to relocate a winery licence?
                  </span>
                </section>
              </mat-checkbox>
              <mat-checkbox *ngIf="application.relocateWinaryLicence==true" formControlName="confirmRelocateWinaryLicence" (change)="confirmRelocateWinaryLicenceChanged()">
                <section>
                  <span>
                    By checking this box, I confirm my understanding of the following requirements for a winery licence:
                  </span>
                  <ul>
                    <li>
                      <span>
                        Produce a minimum of 4500 litres of their own wine on-site each year (at the licensed winery establishment) and they must meet this on-site production requirement in order to renew their annual licence;
                      </span>
                    </li>
                    <li>
                      <span>
                        Produce a minimum of 4500 litres of their own wine on-site each year (at the licensed winery establishment) and they must meet this on-site production requirement in order to renew their annual licence;
                      </span>
                    </li>
                    <li>
                      <span>
                        Produce a minimum of 4500 litres of their own wine on-site each year (at the licensed winery establishment) and they must meet this on-site production requirement in order to renew their annual licence;
                      </span>
                    </li>
                  </ul>
                  Production for this purpose is defined as “fermentation and at least one other significant winemaking step from the following list: blending, crushing, filtering, aging the wine for at least three months, secondary fermentation or carbonation (sparkling), packaging.”
                  Licensee must own or lease the equipment used to produce the wine on-site

                </section>
              </mat-checkbox>
            </div>
          </section>
          <!-- Contact Details -->
          <h3 class="blue-header" *ngIf="!isRAS()">APPLICATION CONTACT DETAILS</h3>
          <h3 class="blue-header" *ngIf="isRAS()"> CONTACT DETAILS</h3>
          <div class="content-bottom">
            <p *ngIf="!isRAS()">
              <i>
                Please provide contact information for the contact that the LCRB should communicate with regarding this
                application.
                <span *ngIf="!this.isLiquor">
                  This contact must be authorized to represent the applicant and have the authority to bind the
                  applicant.
                </span>
              </i>
            </p>
            <p *ngIf="isRAS()">
              Please provide contact information for the contact that the LCRB should communicate with regarding the
              information submission.
            </p>
            <address class="padded-section">

              <app-field label="First Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonFirstName')"
                         errorMessage="Please enter the business contact's first name">
                <input class="form-control" style="width: 350px;" type="text" autocomplete="given-name"
                       formControlName="contactPersonFirstName" id="contactPersonFirstName">
              </app-field>

              <app-field label="Last Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonLastName')"
                         errorMessage="Please enter the business contact's last name">
                <input class="form-control" style="width: 350px;" type="text" autocomplete="family-name"
                       formControlName="contactPersonLastName" id="contactPersonLastName">
              </app-field>

              <app-field label="Title/Position" [required]="false" [valid]="true">
                <input class="form-control" style="width: 350px;" type="text" formControlName="contactPersonRole">
              </app-field>

              <app-field label="Phone Number (main)" [required]="true" [valid]="isValidOrNotTouched('contactPersonPhone')"
                         errorMessage="Please enter the business contact's 10-digit phone number">
                <input class="form-control" style="width: 250px;" maxlength="10" autocomplete="tel"
                       (keydown)="rejectIfNotDigitOrBackSpace($event)" type="text" formControlName="contactPersonPhone">
              </app-field>

              <app-field label="Email" [required]="true" [valid]="isValidOrNotTouched('contactPersonEmail')"
                         errorMessage="Please enter the business contact's email address"
                         afterLabelText="By submitting the email address, you agree that the Liquor and Cannabis Regulation Branch can use it to communicate with you about this application.">
                <input class="form-control" style="width: 350px;" type="text" autocomplete="email"
                       formControlName="contactPersonEmail" id="contactPersonEmail"
                       (blur)="trimValue(form.get('contactPersonEmail'))">
              </app-field>
            </address>
          </div>

          <!-- Declarations section -->
          <h3 class="blue-header ngtest-declarations" *ngIf="application?.applicationType?.showDeclarations">
            DECLARATIONS
          </h3>
          <div class="padded-section content-bottom" *ngIf="application?.applicationType?.showDeclarations ">
            <ng-container *ngIf="!application?.applicationType?.showLiquorDeclarations">
              <section>
                <div *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
                  The application must only be submitted by an individual with the authority to bind the applicant. The
                  branch
                  relies on the applicant to ensure that the individual who submits this application is authorized to do
                  so.
                  Typically, an appropriate individual in a corporation will be a duly authorized signatory who will
                  usually
                  be
                  an officer or, in some cases, a director
                </div>
                <div *ngIf="isRAS()">
                  <p>
                    The Rural Agency Store Information Submission must only be submitted by an individual with the
                    authority to bind the Rural Agency Store. The branch relies on the Rural Agency Store Owner to ensure
                    that the individual who submits this information is authorized to do so. Typically, an appropriate
                    individual in a corporation will be a duly authorized signatory who will usually be an officer, or, in
                    some cases, a director. Note: A lawyer or consultant may NOT submit information on behalf of the Rural
                    Agency Store.
                  </p>
                </div>
                <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
                  <p *ngIf="account?.businessType === 'SoleProprietorship'">
                    This application should be submitted the sole proprietor.
                  </p>
                  <p *ngIf="account?.businessType === 'Society'">
                    This application must only be submitted by an individual with the authority to bind the applicant. The
                    branch relies on the applicant to ensure that the individual who submits this application is
                    authorized to
                    do so. Typically, an appropriate individual for a society will be a director or a senior manager (as
                    defined in the Societies Act).
                  </p>
                  <p *ngIf="account?.businessType === 'PublicCorporation'">
                    This application must only be submitted by an individual with the authority to bind the applicant. The
                    branch relies on the applicant to ensure that the individual who submits this application is
                    authorized to
                    do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
                    will
                    usually be an officer or, in some cases, a director.
                  </p>
                  <div *ngIf="businessTypeIsPartnership()">
                    <p>
                      This application must only be submitted by an individual with the authority to bind the applicant.
                      The
                      branch relies on the applicant to ensure that the individual who submits this application is
                      authorized
                      to do so. Typically, an appropriate individual will be as follows:
                    </p>
                    <ul>
                      <li>If the applicant is a general partnership, one of the general partners</li>
                      <li>If the applicant is a limited partnership, the general partner of the partnership</li>
                    </ul>
                  </div>
                  <p *ngIf="businessTypeIsPrivateCorporation()">
                    The application must only be submitted by an individual with the authority to bind the applicant. The
                    branch relies on the applicant to ensure that the individual who submits this application is
                    authorized to
                    do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
                    will
                    usually be an officer or, in some cases, a director.
                  </p>

                </div>

              </section>
              <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer && !isRAS()">
                Note: A lawyer or
                consultant,
                may NOT submit this application on behalf of
                the applicant.
              </p>
              <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
                <p *ngIf="businessTypeIsPrivateCorporation()">
                  Note: A lawyer or consultant, may NOT submit this application on behalf of the applicant.
                </p>
                <p *ngIf="!businessTypeIsPrivateCorporation()">
                  Note: A lawyer, licensee representative or third party operator may NOT submit this application on
                  behalf of
                  the applicant.
                </p>
              </section>

              <app-field [valid]="!showValidationMessages || form.get('authorizedToSubmit').valid"
                         errorMessage="Please affirm that you are authorized to submit the application." [showChevrons]="false">
                <mat-checkbox formControlName="authorizedToSubmit" id="authorizedToSubmit">
                  <span class="error-states">*</span>
                  <span class="ml-2" *ngIf="!isRAS()">
                    I understand and affirm that I am authorized to submit the application
                  </span>
                  <span class="ml-2" *ngIf="isRAS()">
                    I understand and affirm that I am authorized to submit this information.
                  </span>
                </mat-checkbox>
              </app-field>
              <p *ngIf="application?.licenseType == 'Cannabis Retail Store'||application?.licenseType == 'S119 CRS Authorization' || application?.licenseType == 'Marketer' || application?.licenseType == 'Producer Retail Store'">
                Section 22(2) of the Cannabis Control and Licensing Act states: “A person must not submit to the general
                manager an application, or information or a record included as part of the application, that contains false or misleading
                information, or fails to disclose a material fact”.
              </p>
              <p *ngIf="application?.licenseType != 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization' && application?.licenseType != 'Marketer' && application?.licenseType != 'Producer Retail Store'">
                Section 20 (1) of the Liquor Control and Licensing Act states: "The general manager may refuse to issue,
                renew, transfer or amend a licence if the applicant fails to disclose a material fact required by the
                application or makes a false or misleading statement in the application."
              </p>

              <app-field [valid]="!showValidationMessages || form.get('signatureAgreement').valid"
                         errorMessage="Please affirm that all of the information provided for this application is true and complete."
                         [showChevrons]="false">
                <mat-checkbox formControlName="signatureAgreement" id="signatureAgreement">
                  <span class="error-states">*</span>
                  <span class="ml-2" *ngIf="!isRAS()">
                    I understand and affirm that all of the information provided for this
                    application is true and complete
                  </span>
                  <span class="ml-2" *ngIf="isRAS()">
                    I understand and affirm that all of the information provided is true and complete
                  </span>
                </mat-checkbox>
              </app-field>
            </ng-container>
            <ng-container *ngIf="application?.applicationType?.showLiquorDeclarations">
              <p>
                <strong>
                  The application must only be submitted by an individual with the authority to bind the applicant.
                  The branch relies on the applicant to ensure that the individual who submits this application is
                  authorized to do so. Typically, an appropriate individual in a corporation will be a duly authorized
                  signatory who will usually be an officer or, in some cases, a director. Note: A lawyer or
                  consultant, may NOT submit this application on behalf of the applicant.
                </strong>
              </p>
              <app-field [valid]="!showValidationMessages || form.get('authorizedToSubmit').valid"
                         errorMessage="Please affirm that you are authorized to submit the application." [showChevrons]="false">
                <mat-checkbox formControlName="authorizedToSubmit">
                  <span class="error-states">*</span>
                  <span class="ml-2">
                    I understand and affirm that I am authorized to submit the
                    application
                  </span>
                </mat-checkbox>
              </app-field>
              <p>
                <strong *ngIf="application?.licenseType == 'Cannabis Retail Store' ||application?.licenseType == 'S119 CRS Authorization' || application?.licenseType == 'Marketer'">
                  Section 22(2) of the Cannabis Control and Licensing Act states: “A person must not submit to the general
                  manager an application, or information or a record included as part of the application, that contains false or misleading
                  information, or fails to disclose a material fact”.
                </strong>
                <strong *ngIf="application?.licenseType == 'Cannabis Retail Store' ||application?.licenseType == 'S119 CRS Authorization' || application?.licenseType == 'Marketer'">
                  Section 20(1) of the Liquor Control and Licensing Act states: “The general manager may refuse to
                  issue, renew, transfer or amend a licence if the applicant fails to disclose a material fact required by
                  the application or makes a false or misleading statement in the application.”
                </strong>
              </p>
              <app-field [valid]="!showValidationMessages || form.get('signatureAgreement').valid"
                         errorMessage="Please affirm that all of the information provided for this application is true and complete."
                         [showChevrons]="false">
                <mat-checkbox formControlName="signatureAgreement">
                  <span class="error-states">*</span>
                  <div style="padding-left: 10px;">
                    I understand and affirm that all of the information provided
                    for this application is true and complete
                  </div>
                </mat-checkbox>
              </app-field>
            </ng-container>
          </div>

          <section class="error mt-3" *ngIf="showValidationMessages">
            <p *ngFor="let message of validationMessages">
              <span class="app-cancel">
                <mat-icon aria-label="error icon" style="font-size: 15px;">error</mat-icon>
                {{message}}
              </span>
            </p>
          </section>

          <!-- Next Steps -->


          <h3 *ngIf="htmlContent?.nextSteps" class="blue-header">
            What happens next?
          </h3>
          <section *ngIf="htmlContent?.nextSteps" class="padded-section content-bottom">
            <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.nextSteps"></div>
          </section>

          <!--  Proceed to Pay -->

          <section class="d-flex" style="margin-top: 15px;"
                   *ngIf="!isOpenedByLGForApproval
         && !isRAS()
         && !isFreeEndorsement() && !application?.applicationType?.isFree && !skipPayment
         && ((!isShowLGINApproval && !application?.applicationType?.isShowLGZoningConfirmation)
              ||!showSubmitToLG()) ">

            <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
            <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">

              <p>Proceed to pay online using a credit card through the secure web portal.</p>

              <p>
                <i>
                  <b>Please note:</b> Applications which are submitted without all required information or documents will
                  not be
                  processed. Applicants will be contacted and provided the opportunity to submit missing information. Once
                  applicants provide all required documents to the LCRB, the application will be processed.
                </i>
              </p>

              <div>
                <p *ngIf="application?.licenseType === 'Cannabis Retail Store'|| application?.licenseType == 'S119 CRS Authorization'">
                  The Province does not know how many applications for a cannabis retail store licence or authorization will be received.
                  Therefore, it is difficult to predict how long applications will take to process. To minimize delays in
                  processing, applicants must make sure the application is complete before submitting it.
                </p>
                <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
                  The Province does not know how many applications for a cannabis marketing licence will be received.
                  Therefore,
                  it is difficult to predict how long applications will take to process. To minimize delays in processing,
                  applicants must make sure the application is complete before submitting it.
                </p>

                <br>

                <div *ngIf="application?.licenseType === 'Cannabis Retail Store' || application?.licenseType == 'S119 CRS Authorization'|| application?.licenseType === 'Producer Retail Store'">
                  For questions on the LCRB application process, please contact:
                  <a href="javascript: void(0);">
                    LCRBCannabis@gov.bc.ca
                  </a>
                </div>
                <div *ngIf="application?.licenseType !== 'Cannabis Retail Store' && application?.licenseType != 'S119 CRS Authorization' && application?.licenseType !== 'Producer Retail Store'">
                  For questions on the LCRB application process, please contact:
                  <a href="javascript: void(0);">
                    LCRBLiquor@gov.bc.ca
                  </a>
                </div>

              </div>
            </div>
          </section>

          <section appRemoveIfFeatureOff="LGApprovals" class="ngtest-opened-by-lg"
                   *ngIf="isOpenedByLGForApproval">
            <app-lg-in-confirmation-of-receipt *ngIf="application && isShowLGINApproval  || lgApprovalDecisionMade()"
                                               [application]="application" [isOpenedByLGForApproval]="isOpenedByLGForApproval" [htmlContent]="htmlContent" [disableForm]="lgApprovalDecisionMade()">
            </app-lg-in-confirmation-of-receipt>
            <app-lg-zoning-confirmation *ngIf="application?.applicationType?.isShowLGZoningConfirmation || lgHasReviewedZoning()"
                                        [disableForm]="lgHasReviewedZoning()" [application]="application" [isOpenedByLGForApproval]="isOpenedByLGForApproval">
            </app-lg-zoning-confirmation>
          </section>


          <section *ngIf="(application?.applicationType?.isShowLGINApproval || application?.applicationType?.isShowLGZoningConfirmation)
                && (application?.applicationStatus === 'Intake' || application?.lGApprovalDecision === 'Rejected')
                && !lgApprovalDecisionMade()
                && !lgHasReviewedZoning()
                && !lGHasApproved()
                && showSubmitToLG()">
            <br>
            <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
            <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
              <section class="ngtest-preamble-content">
                <h3>Submit for LG/IN Review</h3>
                Your application will now be submitted to your local government/Indigenous Nation for their
                <span *ngIf="application?.applicationType?.isShowLGINApproval">comment and assessment</span>
                <span *ngIf="application?.applicationType.isShowLGZoningConfirmation">confirmation of zoning</span>.
                Please
                ensure
                you have reviewed
                their policy
                <span *ngIf="form.get('indigenousNation').value.websiteUrl">
                  (
                  <a [href]="form.get('indigenousNation').value.websiteUrl"
                     target="_blank">
                    {{this.form.get('indigenousNation').value.websiteUrl}}
                  </a>)
                </span>
                to ensure your successful submission.
              </section>
              <br>
              <p>
                <fa-icon [icon]="faSave" style="margin-right: 10px;"></fa-icon>If you leave this page, the information you input
                will be saved. You can continue later from the dashboard.
              </p>
            </div>
          </section>

          <section *ngIf="lGHasApproved() && !isOpenedByLGForApproval">
            <br>
            <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
            <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
              <section class="ngtest-preamble-content">
                <h3>LG/IN Review Complete</h3>
                Your application has been reviewed by your local government/Indigenous Nation and they have
                <span *ngIf="isShowLGINApproval">
                  <span *ngIf="this.application.lGApprovalDecision !== 'OptOut'">accepted it for submission.</span>
                  <span *ngIf="this.application.lGApprovalDecision === 'OptOut'">decided to Opt-Out of the community assessment process. In their place, LCRB will complete the site community assessment.</span>
                </span>
                <span *ngIf="application?.applicationType.isShowLGZoningConfirmation">provided confirmation of zoning as required.</span>
                You may now submit your application.
              </section>
              <br>
              <p>
                <fa-icon [icon]="faSave" style="margin-right: 10px;"></fa-icon>If you leave this page, the information you input
                will be saved. You can continue later from the dashboard.
              </p>
            </div>
          </section>

          <section *ngIf="lgApprovalDecisionMade() && !lGHasApproved()">
            <br>
            <div class="flex-grow-0" style="background-color: #E1E8F2; width: 50px;"></div>
            <div class="flex-grow-1 p-3" style="background-color: #F1F4FA; padding: 20px;">
              <section class="ngtest-preamble-content">
                <h3>LG/IN Review Complete </h3>
                Your application has been reviewed by your local government/Indigenous Nation and they have
                <span *ngIf="isShowLGINApproval"><strong>rejected</strong> it.</span>
                <span *ngIf="application?.applicationType.isShowLGZoningConfirmation">specified that zoning <strong>does not</strong> permit a {{application?.applicationType?.name}}.</span>
                You may contact the individual listed above for more information. If you intend to revise your application, you must submit a new one.
              </section>
              <br>
            </div>
          </section>


          <!-- button section when  LGApprovals is enabled  when it's the applicant opening the application -->

          <section appRemoveIfFeatureOff="LGApprovals" *ngIf="!isOpenedByLGForApproval && !lGHasRejected()"
                   style="margin-top: 20px; position: relative;">
            <button mat-raised-button *ngIf="account?.businessType !== 'LocalGovernment '" color="secondary" style="margin-right: 10px;"
                    (click)="saveForLater()" [disabled]="saveForLaterInProgress">
              <span>
                <fa-icon [icon]="faSave"></fa-icon>
                SAVE FOR LATER
              </span>
              <mat-progress-bar *ngIf="saveForLaterInProgress" mode="indeterminate"></mat-progress-bar>
            </button>

            <!-- NEXT STEP BUTTONS
    LG Approval Required -- > Submit to LG For Approval

    No LG Approvals Required
    No Security Screening Required -- > Submit & Pay
    Security Screening Required    -- > Proceed to Security Screening
    LG Approved
    No Security Screening Required -- > Submit & Pay
    Security Screening Required    -- > Proceed to Security Screening

    -->
            <!-- LG Approval Required -->
            <button mat-raised-button class="ng-test-submit-for-lg-review" color="primary"
                    *ngIf="showSubmitToLG()"
                    [disabled]="disableSubmitForLGINApproval" (click)="submitForLGINApproval();">
              <span><fa-icon [icon]="faUniversity" class="mr-1"></fa-icon>SUBMIT FOR LG/IN REVIEW OR COMMENT</span>
              <mat-progress-bar *ngIf="disableSubmitForLGINApproval" mode="indeterminate"></mat-progress-bar>
            </button>

            <!-- LG Approved OR NO LG Approvals Required -->
            <ng-container *ngIf="lGHasApproved() || ((!application?.applicationType?.isShowLGINApproval && !application?.applicationType?.isShowLGZoningConfirmation) || !showSubmitToLG())">

              <button mat-raised-button *ngIf="!application?.applicationType?.requiresSecurityScreening" color="primary"
                      (click)="submit_application()" [disabled]="submitApplicationInProgress">
                SUBMIT&nbsp;<span *ngIf="!isFreeEndorsement() && !application?.applicationType?.isFree &&  !skipPayment && !isRAS()">&amp; PAY</span>
                <mat-progress-bar *ngIf="submitApplicationInProgress" mode="indeterminate"></mat-progress-bar>
              </button>

              <button mat-raised-button *ngIf="application?.applicationType?.requiresSecurityScreening" color="primary"
                      (click)="proceedToSecurityScreening()" [disabled]="proceedToSecurityScreeningInProgress">
                <span>
                  <fa-icon [icon]="faIdCard" class="mr-1"></fa-icon>PROCEED TO SECURITY SCREENING
                </span>
                <mat-progress-bar *ngIf="proceedToSecurityScreeningInProgress" mode="indeterminate"></mat-progress-bar>
              </button>
            </ng-container>

            <span style="color: #1a5a96; float: right; padding-top: 10px;">
              <span (click)="cancelApplication()">
                <fa-icon [icon]="faTrashAlt" style="color: #1a5a96;"></fa-icon>
                <a href="javascript: void(0)" id="cancelApp">
                  CANCEL APPLICATION
                </a>
              </span>
            </span>

            <!-- <div [ngBusy]="busy"></div> -->
          </section>

          <!-- button section when  LGApprovals is disabled -->
          <section appRemoveIfFeatureOn="LGApprovals" style="margin-top: 20px; position: relative;">
            <button mat-raised-button color="secondary" style="margin-right: 10px;" (click)="saveForLater()">
              <span>
                <fa-icon [icon]="faSave"></fa-icon>
                SAVE FOR LATER
              </span>
              <mat-progress-bar *ngIf="saveForLaterInProgress" mode="indeterminate"></mat-progress-bar>
            </button>
            <button mat-raised-button color="primary" (click)="submit_application()">
              <span>
                <fa-icon [icon]="faCreditCard" *ngIf="!skipPayment"></fa-icon>SUBMIT&nbsp;<span *ngIf="!skipPayment && !isRAS()">&amp; PAY</span>
              </span>
              <mat-progress-bar *ngIf="submitApplicationInProgress" mode="indeterminate"></mat-progress-bar>
            </button>

            <span style="color: #1a5a96; float: right; padding-top: 10px;">
              <span (click)="cancelApplication()">
                <fa-icon [icon]="faTrashAlt" style="color: #1a5a96;"></fa-icon>
                <a href="javascript: void(0)" id="cancelApp">
                  CANCEL <span *ngIf="!isRAS()">APPLICATION</span>
                </a>
              </span>
            </span>

            <!-- <div [ngBusy]="busy"></div> -->
          </section>

        </div>
      </div>

      <div [ngClass]="{'normal-mode': mode !== UPLOAD_FILES_MODE}">
        <div [formGroup]="form" style="padding-left: 45px; position: relative">
          <!-- <div [ngBusy]="busy"></div> -->
          <h1 *ngIf="application">Add More files to the Application</h1>
        </div>
        <div *ngIf="application" class="application-wrapper">
          <label for="">Establishment Name</label>:
          <span style="color: #1a5a96;">{{form.controls['establishmentName'].value}}</span>
          <br>

          <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore || application?.applicationType?.name === ApplicationTypeNames.Marketer">

            <label for="">Associates Form</label>
            <br>
            <i>
              Please download
              <a *ngIf="account?.businessType === 'SoleProprietorship'"
                 href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download target="_blank"
                 rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                 href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download target="_blank"
                 rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                 href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download target="_blank"
                 rel="noopener noreferrer">
                and complete
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                 href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download target="_blank"
                 rel="noopener noreferrer">
                and complete
              </a>
              &nbsp;the Associate Form.
            </i>
            <p>Upload the completed form below.</p>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
                                 [disableUploads]="isOpenedByLGForApproval || lGHasApproved()" fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [multipleFiles]="false" entityName="application"
                                 (numberOfUploadedFiles)="uploadedAssociateDocuments = $event" [enableFileDeletion]="false"
                                 [entityId]="applicationId" [uploadHeader]="'TO UPLOAD ASSOCIATE FORM, DRAG FILE HERE OR'" #mainForm>
              </app-file-uploader>
            </section>
            <br>
            <hr>
            <br>

            <label for="">Financial Integrity Form</label>
            <br>
            <i>
              Please download
              <a href="https://www2.gov.bc.ca/assets/download/E840994D9D304AFE8D56A50666281B9D" download
                 target="_blank" rel="noopener noreferrer">
                and complete
              </a> the financial integrity form.
            </i>
            <p>Upload the completed form below.</p>
            <section>
              <app-file-uploader *ngIf="applicationId" documentType="Licence Application Financial Integrity"
                                 [disableUploads]="isOpenedByLGForApproval || lGHasApproved()" fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [multipleFiles]="false" entityName="application"
                                 (numberOfUploadedFiles)="uploadedFinancialIntegrityDocuments = $event" [enableFileDeletion]="false"
                                 [entityId]="applicationId" [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY FORM, DRAG FILE HERE OR'"
                                 #financialIntegrityDocuments>
              </app-file-uploader>
            </section>
            <br>
            <hr>
          </div>
          <label for="">Supporting Documents</label>
          <br>
          <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore">
            Please download the
            <span *ngIf=" application?.applicationType?.name !== ApplicationTypeNames.CRSTransferofOwnership">
              <a *ngIf="account?.businessType === 'SoleProprietorship'"
                 href="https://www2.gov.bc.ca/assets/download/EEC8AD886FA04CD48D78FD22A375A7D8" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                 href="https://www2.gov.bc.ca/assets/download/8FFCF0DA701842F99D4A80F05174A71A" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'IndigenousNation'"
                 href="https://www2.gov.bc.ca/assets/download/87A1FB955AD64660BAC4BF2462226E67" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                 href="https://www2.gov.bc.ca/assets/download/13ADA5B32E4242568DB2B72E3566A56D" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                 href="https://www2.gov.bc.ca/assets/download/9D237C8721B1475FB95534037AE21829" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
            </span>
            <span *ngIf=" application?.applicationType?.name === ApplicationTypeNames.CRSTransferofOwnership">
              <a *ngIf="account?.businessType === 'SoleProprietorship'"
                 href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'Society'"
                 href="https://www2.gov.bc.ca/assets/download/9CC0BA56735E466AB09FEAEE3241F46C" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="account?.businessType === 'IndigenousNation'"
                 href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf="businessTypeIsPartnership()"
                 href="https://www2.gov.bc.ca/assets/download/9A8C9C2E49564C54A2232E60F5B266DB" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
              <a *ngIf=" businessTypeIsPrivateCorporation()"
                 href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank"
                 rel="noopener noreferrer">
                Document Checklist
              </a>
            </span>
            <span *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">
              and assemble
              all
              required documents.
            </span>
            <span *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSLocationChange">
              and assemble
              all
              required documents listed in the 'Documents
              Related to the Proposed Store' section.
            </span>
          </p>
          <section *ngIf="ApplicationTypeNames.Marketer === application?.applicationType?.name">
            <p *ngIf="account?.businessType === 'Society'">
              Please upload the society’s Statement of Directors and Registered Office.
            </p>
            <!-- <p *ngIf="account?.businessType === 'PublicCorporation'">
              Please upload the society’s Statement of Directors and Registered Office.
            </p> -->
            <p *ngIf="businessTypeIsPartnership()">
              Please upload the Partnership Agreement.
            </p>
            <div *ngIf="businessTypeIsPrivateCorporation()">
              <p>Please upload: </p>
              <ul>
                <li>Notice of Articles</li>
                <li>Central Securities Register</li>
              </ul>
            </div>

          </section>
          <section *ngIf="this.isLiquor()"><p>Please add additional supporting documents as directed by LCRB.</p></section>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Licence Application Supporting"
                               [disableUploads]="isOpenedByLGForApproval || lGHasApproved()"
                               fileTypes="FILES MUST BE IN PDF, JPEG, OR PNG FORMAT." entityName="application" [entityId]="applicationId"
                               [maxNumberOfFiles]="200" (numberOfUploadedFiles)="uploadedSupportingDocuments = $event"
                               [extensions]="['pdf', 'jpg', 'jpeg', 'png']" [enableFileDeletion]="false" #supportingDocuments>
            </app-file-uploader>
          </section>
          <br>
          <hr>
        </div>
      </div>

      <div [ngClass]="{'normal-mode': mode !== INCOMPLETE}">
        <div [formGroup]="form" style="padding-left: 45px; position: relative">
          <h1 *ngIf="application">{{application?.applicationType?.name}} Is Missing Required Information</h1>
        </div>
        <div *ngIf="application" class="application-wrapper">


          <p>Your {{application?.applicationType?.name}} submission (Job No. {{application?.jobNumber}}) has been reviewed by the Branch and is missing information that is required for it to be processed. Please see the attached letter that details the missing information.</p>
          <p><strong>Note: Your application will not be processed while required information is still outstanding.</strong></p>

          <section>
            <h3>
              <app-file-uploader *ngIf="application?.id" documentType="Incomplete"
                                 fileTypes="FILE MUST BE IN PDF FORMAT."
                                 [disableUploads]="true"
                                 [enableFileDeletion]="false" [multipleFiles]="true"
                                 entityName="application" [useDocumentTypeForName]="true"
                                 [entityId]="application?.id">
              </app-file-uploader>
            </h3>
          </section>
          <section>
            <h3>Add Required Information:</h3>
            <p>Use the upload box to provide the information requested in the letter above.</p>
            <app-file-uploader *ngIf="application?.id" documentType="Requested Info"
                               fileTypes="FILE MUST BE IN PDF FORMAT."
                               [disableUploads]="false"
                               [enableFileDeletion]="true" [multipleFiles]="true"
                               entityName="application" [useDocumentTypeForName]="true"
                               [entityId]="application?.id">
            </app-file-uploader>
          </section>
          <hr>
          <section>
            <button mat-raised-button color="secondary" style="margin-right: 10px;"
                    (click)="saveForLater()" [disabled]="saveForLaterInProgress">
              <span>
                <fa-icon [icon]="faSave"></fa-icon>
                SAVE FOR LATER
              </span>
              <mat-progress-bar *ngIf="saveForLaterInProgress" mode="indeterminate"></mat-progress-bar>
            </button>

            <button mat-raised-button class="ng-test-submit-incomplete" color="primary" (click)="resolveIncompleteness();">
              <span>SUBMIT</span>
            </button>
            <mat-progress-bar *ngIf="disableIncomplete" mode="indeterminate"></mat-progress-bar>
          </section>

        </div>

      </div>
    </ng-template>

    <ng-template #indigenousContent>
      <section class="large-screen-only" *ngIf="account?.businessType !== 'LocalGovernment'">
        <h3 class="blue-header" style="margin-bottom: 0; margin-top: 0;">INDIGENOUS NATION</h3>

        <div [formGroup]="form" class="submitted-content"
             style="background-color: #F1F4FA; border-bottom: 4px solid #E4E4E4">
          <app-field label="Is this application for an Indigenous Nation?" [valid]="true">
            <mat-button-toggle-group formControlName="applyAsIndigenousNation" aria-label="Font Style">
              <mat-button-toggle [value]="true">Yes</mat-button-toggle>
              <mat-button-toggle [value]="false">No</mat-button-toggle>
            </mat-button-toggle-group>
          </app-field>

          <div *ngIf="form.get('applyAsIndigenousNation').value" style="margin-bottom: 10px; margin-top: 10px;">
            Third party agents or consultants cannot apply on behalf of an Indigenous nation. The application and all
            supporting documents will be connected to the BCeID used at log-in.
          </div>

          <app-field label="Select the Indigenous nation" [valid]="isValidOrNotTouched('indigenousNationId')"
                     *ngIf="form.get('applyAsIndigenousNation').value" errorMessage="Please select the Indigenous nation">
            <select class="form-control" formControlName="indigenousNationId" style="width: 250px;">
              <option value=""></option>
              <option [value]="item.id" *ngFor="let item of indigenousNations">{{item.name}}</option>
            </select>
          </app-field>
        </div>
      </section>
      <app-associate-content *ngIf="account?.businessType !== 'LocalGovernment'" [account]="account"
                             [showBothContents]="false" [isIndigenousNation]="form.get('applyAsIndigenousNation').value">
      </app-associate-content>
    </ng-template>

    <div class="dashboard-spacing" style="position: relative" appRemoveIfFeatureOff="IndigenousNation">
      <!-- <div [ngBusy]="busy"></div> -->
      <div class="row">
        <div class="col-md-8 col-sm-12">
          <ng-container *ngTemplateOutlet="applicationContent"></ng-container>
        </div>

        <div class="col-md-3 col-sm-12">
          <h1>&nbsp;</h1>

          <ng-container *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore">
            <ng-container *ngTemplateOutlet="indigenousContent"></ng-container>
          </ng-container>

          <section appRemoveIfFeatureOff="LGApprovals" class="ngtest-opened-by-lg">
            <app-lg-info-panel *ngIf="application" [application]="application">
            </app-lg-info-panel>
          </section>

        </div>
      </div>
    </div>

    <div appRemoveIfFeatureOn="IndigenousNation">
      <!-- <div [ngBusy]="busy"></div> -->
      <ng-container *ngTemplateOutlet="applicationContent">
      </ng-container>
    </div>
  </div>
</div>
